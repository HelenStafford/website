!function(e,t,n){/**
     * @license
     * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
     * Build: `lodash exports=none include="defer,delay,debounce,throttle,assign,defaults,bind,partial,create" iife="var _ = (function() { %output% return lodash; }.call(this));" -o lodash.custom.js`
     * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
     * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     * Available under MIT license <http://lodash.com/license>
     */
var r=function(){function t(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(o<0?0:o);++r<o;)i[r]=e[t+r];return i}function n(){}function r(e){function n(){if(i){var e=t(i);X.apply(e,arguments)}if(this instanceof n){var s=o(r.prototype),l=r.apply(s,e||arguments);return d(l)?l:s}return r.apply(a,e||arguments)}var r=e[0],i=e[2],a=e[4];return ce(n,e),n}function o(e,t){return d(e)?ne(e):{}}function i(e,t,n){if("function"!=typeof e)return x;if("undefined"==typeof t||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(se.funcNames&&(r=!e.name),r=r||!se.funcDecomp,!r)){var o=z.call(e);se.funcNames||(r=!P.test(o)),r||(r=j.test(o),ce(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return g(e,t)}function a(e){function n(){var e=f?c:this;if(s){var m=t(s);X.apply(m,arguments)}if((l||h)&&(m||(m=t(arguments)),l&&X.apply(m,l),h&&m.length<u))return i|=16,a([r,g?i:i&-4,m,null,c,u]);if(m||(m=arguments),p&&(r=e[v]),this instanceof n){e=o(r.prototype);var y=r.apply(e,m);return d(y)?y:e}return r.apply(e,m)}var r=e[0],i=e[1],s=e[2],l=e[3],c=e[4],u=e[5],f=1&i,p=2&i,h=4&i,g=8&i,v=r;return ce(n,e),n}function s(e,n,o,i,l,c){var u=1&n,f=2&n,d=4&n,h=16&n,g=32&n;if(!f&&!p(e))throw new TypeError;h&&!o.length&&(n&=-17,h=o=!1),g&&!i.length&&(n&=-33,g=i=!1);var v=e&&e.__bindData__;if(v&&v!==!0)return v=t(v),v[2]&&(v[2]=t(v[2])),v[3]&&(v[3]=t(v[3])),!u||1&v[1]||(v[4]=l),!u&&1&v[1]&&(n|=8),!d||4&v[1]||(v[5]=c),h&&X.apply(v[2]||(v[2]=[]),o),g&&ee.apply(v[3]||(v[3]=[]),i),v[1]|=n,s.apply(null,v);var m=1==n||17===n?r:a;return m([e,n,o,i,l,c])}function l(){H.shadowedProps=A,H.array=H.bottom=H.loop=H.top="",H.init="iterable",H.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)H[n]=e[n];var r=H.args;H.firstArg=/^[^,]+/.exec(r)[0];var o=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+le(H)+"\n}");return o(i,C,W,K,k,u,ue,h,H.keys,$,R,ae,D,J,Y)}function c(e){return"function"==typeof e&&G.test(e)}function u(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Y.call(e)==T||!1}function f(e,t){var n=o(e);return t?he(n,t):n}function p(e){return"function"==typeof e}function d(e){return!(!e||!R[typeof e])}function h(e){return"string"==typeof e||e&&"object"==typeof e&&Y.call(e)==D||!1}function g(e,n){return arguments.length>2?s(e,17,t(arguments,2),null,n):s(e,1,null,null,n)}function v(e,t,n){function r(){h&&clearTimeout(h),l&&clearTimeout(l),l=h=g=_}function o(){var n=t-(ve()-u);if(n<=0||n>t){l&&clearTimeout(l);var r=g;l=h=g=_,r&&(v=ve(),c=e.apply(f,s||[]),h||l||(s=f=null))}else h=setTimeout(o,n)}function i(){h&&clearTimeout(h),l=h=g=_,(y||m!==t)&&(v=ve(),c=e.apply(f,s||[]),h||l||(s=f=null))}function a(){if(s=arguments,u=ve(),f=this,g=y&&(h||!b),m===!1)var n=b&&!h;else{l||b||(v=u);var r=m-(u-v),a=r<=0||r>m;a?(l&&(l=clearTimeout(l)),v=u,c=e.apply(f,s)):l||(l=setTimeout(i,r))}return a&&h?h=clearTimeout(h):h||t===m||(h=setTimeout(o,t)),n&&(a=!0,c=e.apply(f,s)),!a||h||l||(s=f=null),c}var s,l,c,u,f,h,g,v=0,m=!1,y=!0;if(!p(e))throw new TypeError;if(t=ie(0,t)||0,n===!0){var b=!0;y=!1}else d(n)&&(b=n.leading,m="maxWait"in n&&(ie(t,n.maxWait)||0),y="trailing"in n?n.trailing:y);return a.cancel=r,a}function m(e){if(!p(e))throw new TypeError;var n=t(arguments,1);return setTimeout(function(){e.apply(_,n)},1)}function y(e,n){if(!p(e))throw new TypeError;var r=t(arguments,2);return setTimeout(function(){e.apply(_,r)},n)}function b(e){return s(e,16,t(arguments,1))}function w(e,t,n){var r=!0,o=!0;if(!p(e))throw new TypeError;return n===!1?r=!1:d(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),M.leading=r,M.maxWait=t,M.trailing=o,v(e,t,M)}function x(e){return e}function E(){}var _,k={},P=/^\s*function[ \n\r\t]+\w/,j=/\bthis\b/,A=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],T="[object Arguments]",L="[object Array]",I="[object Boolean]",S="[object Date]",C="[object Error]",O="[object Function]",q="[object Number]",V="[object Object]",N="[object RegExp]",D="[object String]",M={leading:!1,maxWait:0,trailing:!1},F={configurable:!1,enumerable:!1,value:null,writable:!1},H={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},R={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Q=R[typeof e]&&e||this,U=R[typeof global]&&global;!U||U.global!==U&&U.window!==U||(Q=U);var B=[],W=Error.prototype,$=Object.prototype,J=String.prototype,Y=$.toString,G=RegExp("^"+String(Y).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),z=Function.prototype.toString,K=$.hasOwnProperty,X=B.push,Z=$.propertyIsEnumerable,ee=B.unshift,te=function(){try{var e={},t=c(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),ne=c(ne=Object.create)&&ne,re=c(re=Array.isArray)&&re,oe=c(oe=Object.keys)&&oe,ie=Math.max,ae={};ae[L]=ae[S]=ae[q]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ae[I]=ae[D]={constructor:!0,toString:!0,valueOf:!0},ae[C]=ae[O]=ae[N]={constructor:!0,toString:!0},ae[V]={constructor:!0},function(){for(var e=A.length;e--;){var t=A[e];for(var n in ae)K.call(ae,n)&&!K.call(ae[n],t)&&(ae[n][t]=!1)}}();var se=n.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments);se.argsClass=Y.call(arguments)==T,se.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),se.enumErrorProps=Z.call(W,"message")||Z.call(W,"name"),se.enumPrototypes=Z.call(e,"prototype"),se.funcDecomp=!c(Q.WinRTError)&&j.test(function(){return this}),se.funcNames="string"==typeof Function.name,se.nonEnumArgs=0!=r,se.nonEnumShadows=!/valueOf/.test(n),se.spliceObjects=(B.splice.call(t,0,1),!t[0]),se.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1);var le=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",se.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):se.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),se.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),se.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(se.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),se.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",se.nonEnumShadows){t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ";for(var r=0;r<7;r++)t+="\n    index = '"+e.shadowedProps[r]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||se.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};ne||(o=function(){function e(){}return function(t){if(d(t)){e.prototype=t;var n=new e;e.prototype=null}return n||Q.Object()}}());var ce=te?function(e,t){F.value=t,te(e,"__bindData__",F)}:E;se.argsClass||(u=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&K.call(e,"callee")&&!Z.call(e,"callee")||!1});var ue=re||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Y.call(e)==L||!1},fe=l({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),pe=oe?function(e){return d(e)?se.enumPrototypes&&"function"==typeof e||se.nonEnumArgs&&e.length&&u(e)?fe(e):oe(e):[]}:fe,de={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:pe,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},he=l(de,{top:de.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),ge=l(de);p(/x/)&&(p=function(e){return"function"==typeof e&&Y.call(e)==O});var ve=c(ve=Date.now)&&ve||function(){return(new Date).getTime()};return n.assign=he,n.bind=g,n.create=f,n.debounce=v,n.defaults=ge,n.defer=m,n.delay=y,n.keys=pe,n.partial=b,n.throttle=w,n.extend=he,n.identity=x,n.isArguments=u,n.isArray=ue,n.isFunction=p,n.isObject=d,n.isString=h,n.noop=E,n.now=ve,n.VERSION="2.4.1",n}.call(this);/*!
     * @overview es6-promise - a tiny implementation of Promises/A+.
     * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
     * @license   Licensed under MIT license
     *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
     * @version   2.0.1
     */
(function(){"use strict";function r(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(){}function s(){return function(){process.nextTick(f)}}function l(){var e=0,n=new H(f),r=t.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=f,function(){e.port2.postMessage(0)}}function u(){return function(){setTimeout(f,1)}}function f(){for(var e=0;e<D;e+=2){var t=Q[e],r=Q[e+1];t(r),Q[e]=n,Q[e+1]=n}D=0}function p(){}function d(){return new TypeError("You cannot resolve a promise with itself")}function h(){return new TypeError("A promises callback cannot return that same promise.")}function g(e){try{return e.then}catch(t){return $.error=t,$}}function v(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function m(e,t,n){M(function(e){var r=!1,o=v(n,t,function(n){r||(r=!0,t!==n?w(e,n):E(e,n))},function(t){r||(r=!0,_(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,_(e,o))},e)}function y(e,t){t._state===B?E(e,t._result):e._state===W?_(e,t._result):k(t,n,function(t){w(e,t)},function(t){_(e,t)})}function b(e,t){if(t.constructor===e.constructor)y(e,t);else{var r=g(t);r===$?_(e,$.error):r===n?E(e,t):o(r)?m(e,t,r):E(e,t)}}function w(e,t){e===t?_(e,d()):r(t)?b(e,t):E(e,t)}function x(e){e._onerror&&e._onerror(e._result),P(e)}function E(e,t){e._state===U&&(e._result=t,e._state=B,0===e._subscribers.length||M(P,e))}function _(e,t){e._state===U&&(e._state=W,e._result=t,M(x,e))}function k(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+B]=n,o[i+W]=r,0===i&&e._state&&M(P,e)}function P(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?T(n,r,o,i):o(i);e._subscribers.length=0}}function j(){this.error=null}function A(e,t){try{return e(t)}catch(n){return J.error=n,J}}function T(e,t,n,r){var i,a,s,l,c=o(n);if(c){if(i=A(n,r),i===J?(l=!0,a=i.error,i=null):s=!0,t===i)return void _(t,h())}else i=r,s=!0;t._state!==U||(c&&s?w(t,i):l?_(t,a):e===B?E(t,i):e===W&&_(t,i))}function L(e,t){try{t(function(t){w(e,t)},function(t){_(e,t)})}catch(n){_(e,n)}}function I(e,t,n,r){this._instanceConstructor=e,this.promise=new e(p,r),this._abortOnReject=n,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):_(this.promise,this._validationError())}function S(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function C(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function O(e){this._id=Z++,this._state=n,this._result=n,this._subscribers=[],p!==e&&(o(e)||S(),this instanceof O||C(),L(this,e))}var q;q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var V,N=q,D=(Date.now||function(){return(new Date).getTime()},Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return a.prototype=e,new a},0),M=function(e,t){Q[D]=e,Q[D+1]=t,D+=2,2===D&&V()},F="undefined"!=typeof e?e:{},H=F.MutationObserver||F.WebKitMutationObserver,R="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3);V="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?s():H?l():R?c():u();var U=void 0,B=1,W=2,$=new j,J=new j;I.prototype._validateInput=function(e){return N(e)},I.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},I.prototype._init=function(){this._result=new Array(this.length)};var Y=I;I.prototype._enumerate=function(){for(var e=this.length,t=this.promise,n=this._input,r=0;t._state===U&&r<e;r++)this._eachEntry(n[r],r)},I.prototype._eachEntry=function(e,t){var n=this._instanceConstructor;i(e)?e.constructor===n&&e._state!==U?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(n.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(B,t,e))},I.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===U&&(this._remaining--,this._abortOnReject&&e===W?_(r,n):this._result[t]=this._makeResult(e,t,n)),0===this._remaining&&E(r,this._result)},I.prototype._makeResult=function(e,t,n){return n},I.prototype._willSettleAt=function(e,t){var r=this;k(e,n,function(e){r._settledAt(B,t,e)},function(e){r._settledAt(W,t,e)})};var G=function(e,t){return new Y(this,e,(!0),t).promise},z=function(e,t){function r(e){w(a,e)}function o(e){_(a,e)}var i=this,a=new i(p,t);if(!N(e))return _(a,new TypeError("You must pass an array to race.")),a;for(var s=e.length,l=0;a._state===U&&l<s;l++)k(i.resolve(e[l]),n,r,o);return a},K=function(e,t){var n=this;if(e&&"object"==typeof e&&e.constructor===n)return e;var r=new n(p,t);return w(r,e),r},X=function(e,t){var n=this,r=new n(p,t);return _(r,e),r},Z=0,ee=O;O.all=G,O.race=z,O.resolve=K,O.reject=X,O.prototype={constructor:O,then:function(e,t){var n=this,r=n._state;if(r===B&&!e||r===W&&!t)return this;var o=new this.constructor(p),i=n._result;if(r){var a=arguments[r-1];M(function(){T(r,o,a,i)})}else k(n,o,e,t);return o},"catch":function(e){return this.then(null,e)}};var te=function(){var t;t="undefined"!=typeof global?global:"undefined"!=typeof e&&e.document?e:self;var n="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),o(e)}();n||(t.Promise=ee)},ne={Promise:ee,polyfill:te};"function"==typeof define&&define.amd?define(function(){return ne}):"undefined"!=typeof module&&module.exports?module.exports=ne:"undefined"!=typeof this&&(this.ES6Promise=ne)}).call(e),e.ES6Promise.polyfill();var o=function(){var t=function(e){return e||(e={}),e.assert=e.clear=e.count=e.debug=e.dir=e.dirxml=e.error=e.exception=e.group=e.groupCollapsed=e.groupEnd=e.info=e.log=e.markTimeline=e.profile=e.profileEnd=e.table=e.time=e.timeEnd=e.timeStamp=e.trace=e.warn=function(){},e};return e.console||(e.console=t()),t}.call(e);!function(){"use strict";var i=!(!e.LIVEBALL||!e.LIVEBALL.inStudio);if(i){var a;a=e.LIVEBALL.App?e.LIVEBALL.App.features.labs:e.LIVEBALL.features&&e.LIVEBALL.features.labs}e.ixp=e.ixp||{};var s=e.ixp.runtime=e.ixp.runtime||{};s.fn=s.fn||{};var l=[],c=!1;s.ready=function(t,n){if("function"!=typeof t)throw new Error("runtime.ready requires the callback to be a function");var o=n?function(){t.call(n)}:t;return c?void(r.isFunction(e.requestAnimationFrame)?e.requestAnimationFrame(o):setTimeout(o,0)):void l.push(o)};var u=s.constants=s.constants||{};s.flags=s.flags||{};var f=function(){for(var t,n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,i=function(e){try{return decodeURIComponent(e.replace(r," "))}catch(t){return console.error(t),null}},a=e.location.search.substring(1);t=o.exec(a);)n[i(t[1])]=i(t[2]);return n};s.queryString=f();var p="https:"===e.location.protocol;s.flags.https=p,"true"!==s.queryString.debug&&"true"!==s.queryString._ion_debug||(s.flags.debug=!0);var d=!!s.flags.debug;s.console=d?e.console:o(),s.log=function(){d&&("function"==typeof s.console.log?s.console.log.apply(s.console,arguments):s.console.log(Array.prototype.slice.call(arguments)))},i&&(s.studio={app:e.LIVEBALL.App,labs:!!a}),s.paths=s.paths||{},function(e){var t={https:"https://8f2a3f802cdf2859af9e-51128641de34f0801c2bd5e1e5f0dc25.ssl.cf1.rackcdn.com",http:"http://1f1835935797600af226-51128641de34f0801c2bd5e1e5f0dc25.r5.cf1.rackcdn.com"},n=function(e){return e.replace(/^\//g,"")},r=function(e){return e.replace(/\/$/g,"")},o=function(e){return n(r(e))};e.join=function(){for(var e=Array.prototype.slice.call(arguments,0),t=[],n=0,i=e.length;n<i;n++){var a=e[n];if("string"!=typeof a)throw new Error("Arguments to path.join must be strings");"/"!==a&&(a=0===n?r(a):o(a),t=t.concat(a.split("/")))}return t.join("/")},e.getCdnPath=function(){var n=p?t.https:t.http;if(!arguments.length)return n;var r=Array.prototype.slice.call(arguments,0);r=[n].concat(r);var o=e.join.apply(this,r);return s.flags.debug?o.replace(".min",""):o}}.call(this,s.paths),s.dependencies=s.dependencies||{};var h=s.components=s.components||{};h.dependencies=h.dependencies||{},h.dependencies._=r,function(n,r){var o={},i={};s.flags.debug&&(n._modules=o,n._loading=i);var a=function(e,t){for(var n=e.split("."),r=t.split(".");n.length<r.length;)n.push("0");for(;r.length<n.length;)r.push("0");for(var o=0,i=n.length;o<i;o++){var a=Number(n[o]),s=Number(r[o]);if(a!==s)return a>s?1:-1}return 0},l=function(e,t){if(e instanceof Array){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];n.push({version:t(i),module:i})}return n.length>1&&n.sort(function(e,t){return-a(e.version,t.version)}),n}return[]},c=function(e,n){var r=t.createElement("script"),o=t.head||t.getElementsByTagName("head")[0],i=!1,a=n.load;n.load=function(){i||(i=!0,a.apply(this,arguments))},r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(n.load(),r.onreadystatechange=null)},r.onload=n.load,r.onerror=n.error,r.src=e,o.appendChild(r)},u=function(e,t,n){var r=e.instances;r.length||"function"!=typeof t.findInstances||(r=e.instances=l(t.findInstances(),t.getInstanceVersion));var o=n.minVer||n.version,i=n.maxVer||n.upToVersion,s=!(!o&&!i);if(!s&&1===r.length)return r[0].module;if(r.length){if(!s)return r[0].module;for(var c,u=0,f=r.length;u<f;u++)if(c=r[u],(!o||a(c.version,o)>=0)&&(!i||a(c.version,i)<0))return c.module}return null},f=function(e,t,n){if("function"==typeof n){var r=n;n={done:r}}else n||(n={});var l,f=o[e];if(n.sync===!0)return u(f,t,n);var p=new Promise(function(e,r){var o=f.instances,p=u(f,t,n);return p?void e(p):(l=n.url||t.url)?i[l]?(s.flags.debug&&console.log("queuing module url="+l,n),void i[l].then(e)["catch"](r)):(s.flags.debug&&console.log("loading module url="+l,n),void c(l,{load:function(){delete i[l];try{var n=t.getInstanceExport();o.push({version:t.getInstanceVersion(n),module:n}),o.length>1&&o.sort(function(e,t){return-a(e.version,t.version)}),e(n)}catch(s){r(s)}},error:function(e){delete i[l],e=new Error("failed to load script: url="+l),r(e)}})):void r(new Error("No module instances found"))});return l&&!i[l]&&(i[l]=p),"function"==typeof n.done&&p.then(function(e){n.done(e)}),"function"==typeof n.fail&&p["catch"](function(e){n.fail(e)}),p};n.define=function(e,t){if(!e||"string"!=typeof e)throw new Error("(string) module name is required");if(t||(t={}),"function"!=typeof t.getInstanceExport||"function"!=typeof t.getInstanceVersion)throw new Error("options must contain getInstanceExport and getInstanceVersion functions");if(e=e.toLowerCase(),o[e])throw new Error("module "+e+" has already been defined");o[e]={loader:function(n){return f(e,t,n)},instances:[]}},n.require=function(e,t){if(!e||"string"!=typeof e)throw new Error("(string) module name is required");e=e.toLowerCase();var n=o[e];if(!n)throw new Error("module "+e+" has not been defined");return n.loader(t)},n.define("jQuery",{url:s.dependencies.jQueryUrl,findInstances:function(){var t=[];return r&&r.jQuery&&r.jQuery.v1_11&&t.push(r.jQuery.v1_11),e.jQuery&&t.push(e.jQuery),e.$&&(!e.jQuery||e.jQuery&&e.jQuery!==e.$)&&t.push(e.$),t},getInstanceExport:function(){return e.jQuery.noConflict(!0)},getInstanceVersion:function(e){return e.fn.jquery}})}.call(this,s.dependencies,h.dependencies);var g=s.dependencies.require("jQuery",{minVer:"1.11.1",maxVer:"1.11.2"});s.events=s.events||{},function(e){var t={};s.flags.debug&&(e._subscriptions=t);var o=function(e,t){var n,r,o,i,a=-1,s=e.length;switch(t.length){case 0:for(;++a<s;)(n=e[a]).fn.call(n.ctx);return;case 1:for(r=t[0];++a<s;)(n=e[a]).fn.call(n.ctx,r);return;case 2:for(r=t[0],o=t[1];++a<s;)(n=e[a]).fn.call(n.ctx,r,o);return;case 3:for(r=t[0],o=t[1],i=t[2];++a<s;)(n=e[a]).fn.call(n.ctx,r,o,i);return;default:for(t=t||[];++a<s;)(n=e[a]).fn.apply(n.ctx,t);return}};e.on=function(e,n,r){if(!e||!n||!r)throw new Error("context, name, and callback are required");n=n.toLowerCase();var o=t[n]||(t[n]=[]);return o.push({ctx:e,fn:r}),this},e.once=function(e,t,n){if(!e||!t||!n)throw new Error("context, name, and callback are required");var r=this,o=function(){r.off(t,o),n.apply(this,arguments)};return this.on(e,t,o)},e.off=function(e,n,o){if(!e)throw new Error("context is required");for(var i=n?[n]:r.keys(t),a=0,s=i.length;a<s;a++){n=i[a],n=n.toLowerCase();var l=t[n];if(l){for(var c=[],u=0,f=l.length;u<f;u++){var p=l[u];(e!==p.ctx||o&&o!==p.fn)&&c.push(p)}c.length?t[n]=c:delete t[n]}}return this},e.trigger=function(e,r){var i;if("string"==typeof e?(i=Array.prototype.slice.call(arguments,1),r=e,e=n):i=Array.prototype.slice.call(arguments,2),!r||!t)return!1;r=r.toLowerCase();var a=t[r];if(!a)return!1;if(e){for(var s,l=[],c=-1,u=a.length;++c<u;)(s=a[c]).ctx!==e&&l.push(s);a=l}return o(a,i),!0}}.call(this,s.events);var v,m=function(){var e=(s.context.id||"").split("$");return 3===e.length?e[2]:0},y=function(e,t){var r={url:t.url,async:!0,data:"DELETE"===t.type?n:JSON.stringify(t.data),dataType:"json",contentType:"application/json; charset=utf-8",type:t.type||"POST",cache:!1,success:t.success&&e.proxy(t.success,this),error:t.error&&e.proxy(t.error,this)};t.always=t.always||e.proxy(t.always||function(){},this);var o;if(t.queue===!1)o=Promise.resolve(e.ajax(r).always(t.always));else{if(v){var i=function(){return Promise.resolve(e.ajax(r).always(t.always))};o=v.then(i,i)}else o=Promise.resolve(e.ajax(r).always(t.always));v=o}return o};s.constants.promise=s.constants.promise||{},s.constants.promise={cancellationError:"Promise has been cancelled"};var b=function(e){return g.then(function(t){return y(t,e)})},w=function(e){if(!r.isFunction(t.querySelectorAll))return null;for(var n,o=e.toLowerCase(),i=t.querySelectorAll(s.constants.anchor.attrSelector),a=i.length-1;a>=0;a--)if(n=i[a],n.getAttribute(s.constants.anchor.attr).toLowerCase()===o)return n;return null};(function(){s.constants.anchor=s.constants.anchor||{},s.constants.anchor={attr:"data-ixp-anchor",attrSelector:"[data-ixp-anchor]"},s.runScriptlet=function(e,t){t||(t={});var n={scriptletId:e,options:t,cancel:!1};if(s.events.trigger("runtime:runscriptlet:starting",n),!n.cancel){t=n.options||t;var r=b({url:"/admin/api/v1/scriptlets/"+e+"/run",data:{scriptletId:e,token:s.context.token,tokenId:m(),wait:!!t.wait},queue:t.queue});return n={scriptletId:e,options:t,promise:r},s.events.trigger("runtime:runscriptlet:completed",n),r}},s.runIntegration=function(e,t){t||(t={});var n={integrationId:e,options:t,cancel:!1};if(s.events.trigger("runtime:runintegration:starting",n),!n.cancel){t=n.options||t;var r=b({url:"/admin/api/v1/integrations/"+e+"/run",data:{integrationId:e,token:s.context.token,tokenId:m(),wait:!!t.wait},queue:t.queue});return n={integrationId:e,options:t,promise:r},s.events.trigger("runtime:runintegration:completed",n),r}},s.convert=function(e){e||(e={});var t={options:e,cancel:!1};if(s.events.trigger("runtime:convert:starting",t),!t.cancel){e=t.options||e;var n=b({url:"/outside/convert.ashx?lb3id="+s.context.id+"&v=1&rnd="+parseInt(31777*Math.random()),type:"GET",queue:e.queue});return t={options:e,promise:n},s.events.trigger("runtime:convert:completed",t),n}},s.tag=function(e,t){if(t||(t={}),!e)throw new Error("Tag cannot be empty");var n={tag:e,options:t,cancel:!1};if(s.events.trigger("runtime:tag:starting",n),!n.cancel){e=n.tag||e,t=n.options||t;var r=b({url:"/outside/tag.ashx?lb3id="+s.context.id+"&tag="+encodeURIComponent(e)+"&v=1&rnd="+parseInt(31777*Math.random()),type:"GET",queue:t.queue});return n={tag:e,options:t,promise:r},s.events.trigger("runtime:tag:completed",n),r}};var o=function(e,t){var n=e.parents("[data-ixp-component-root]");if(!n.length)return[];var r=[];return n.each(function(){var e=t(this),n=e.data("ixp-component-root"),o={element:e,id:n};r.push(o)}),r.reverse()},i=function(e){var t=0,n=s.components.sendCommand&&s.components.sendCommand("status","sticky_container");if(n&&n.length)for(var r=0,o=n.length;r<o;r++){var i=n[r].data;(i.sticksTo=i.isSticking||e&&i.scrollTop<e)&&(t+=i.offset+i.height)}return t},a=function(e,o,a){var l,c=function(){s.events.trigger(s.constants.visibility.events.recalculate,{}),s.events.trigger("runtime:scrollto:scrolled",o),l()},u=e.offset().top;if(o.preventOffset!==!0&&(u-=i(u)),o.inViewport!==n){var f=s.fn.isInViewport(e[0],o.inViewport);if(f)return new Promise(function(e){l=e,r.defer(c)})}return 0===o.speed?new Promise(function(e){l=e,a("html, body").stop().scrollTop(u),r.defer(c)}):new Promise(function(e){l=e;var n=t.scrollingElement||t.documentElement;a(n).stop().animate({scrollTop:u},{duration:o.speed,easing:"swing",always:r.debounce(c,17)})})};s.scrollTo=function(t,l){l||(l={}),g.then(function(c){var u,f;if(r.isObject(t)?(f=c(t),u=f.attr(s.constants.anchor.attr)):(u=t,f=c(w(u))),f.length){var p=f[0],d={anchor:u,element:p,speed:l.speed&&parseInt(l.speed,10)||0,updateUrlHash:u!==n&&(l.updateUrlHash===n||l.updateUrlHash),inViewport:l.inViewport,preventOffset:!1,getOffsetTop:i},h=r.extend(d,{cancel:!1});if(s.events.trigger("runtime:scrollto:scrolling",h),!h.cancel){d.speed=h.speed,d.updateUrlHash=h.updateUrlHash,d.inViewport=h.inViewport;var g;d.completionPromise=new Promise(function(e,t){g=e}),d.updateUrlHash&&(s.events.trigger("runtime:scrollto:hash:changing",{hash:u}),e.location.hash="#"+u);var v,m=Promise.resolve(),y=!1,b=o(f,c);if(b.length&&s.components.sendCommand){for(var x=[],E=0,_=b.length;E<_;E++){var k=s.components.sendCommand("scrollto",b[E].id,d);if(k)for(var P=0,j=k.length;P<j;P++){var A=k[P];A.data.preventDefault&&(y=!0),A.data.preventOffset&&(d.preventOffset=!0),A.data.element&&(v=d.element=A.data.element),d.inViewport=A.data.inViewport,x.push(A.data.promise)}}x.length&&(m=m.then(function(){return Promise.all(x)}))}return y||(v&&(f=c(v)),m=m.then(function(){return a(f,d,c)})),g&&m.then(g),m}}})}}).call(this),s.data=s.data||{},function(e){var t={},o=function(e,n,o){if(!e||!n||"string"!=typeof e)throw new Error("(string) key, and value are required");e=e.toLowerCase(),"string"==typeof n&&(n={value:n}),o||(o={}),!t[e]||o.replace?t[e]=n:t[e]=r.extend(t[e],n)};e.model=e.model||{},e.model.get=function(e){return e?(e=e.toLowerCase(),t[e]):r.extend({},t)};var a=function(e){if(!e)return null;if(e.indexOf("{")>-1)try{var t=JSON.parse(e);return{id:t.id,key:t.name}}catch(n){throw new Error("Data field contains invalid JSON")}var r=e.indexOf("\\");return r>-1?{id:0,key:e.substring(r+2)}:{id:0,key:e}},l=function(e,n,r){n=n instanceof Array?n:[n];for(var o,i,a=[],l=[],c=r?":saving":":saved",u=0,f=n.length;u<f;u++)if(o=n[u],r||"valid"===o.validation)i={key:o.key,value:o.value},a.push(i),s.events.trigger("runtime:data:"+o.key+c,{instanceId:e,data:i});else{var p=t[o.key];i={key:o.key,value:p&&p.value,failedValue:o.value,validation:o.validation},l.push(i),s.events.trigger("runtime:data:"+o.key+":failed",{instanceId:e,data:i})}var d={instanceId:e,data:a};r||(d.failed=l),s.events.trigger("runtime:data"+c,d)},c=function(e){if(e&&e.length)for(var t,n=0,r=e.length;n<r;n++)t=e[n],"valid"===t.validation&&o(t.key,{value:t.value})},u=function(e,t){var n=t.data.instanceId,o=r.isFunction(t.success)&&t.success;t.success=function(e){var t=e&&e instanceof Array?e:[e];if(c(t),o)try{o.apply(this,arguments)}catch(r){}t&&t.length&&l(n,t)};var i=r.isFunction(t.error)&&t.error;return t.error=function(e){var t;if(409===e.status){var r=JSON.parse(e.responseText);t=r&&r.responseStatus&&r.responseStatus.data,t&&(t=t instanceof Array?t:[t],c(t))}if(i)try{i.apply(this,arguments)}catch(o){}t&&t.length&&l(n,t)},y(e,t)};e.save=function(t){if(i||!t.submit&&!t.data)return Promise.resolve();!t.data&&t.submit&&(t.data=[]);var r,o,c,f="",p=t.data instanceof Array;if(p){f=t.submit?"/submit":"/bulk";for(var d,h=[],v=0,y=t.data.length;v<y;v++)d=t.data[v],c=a(d.dataField),c&&h.push({fieldId:c.id,key:c.key,value:d.value,metadata:d.metadata,method:d.method});(h.length||t.submit)&&(r={data:h,token:s.context.token,instanceId:t.instanceId})}else c=a(t.data.dataField),c&&(r={key:c.key,fieldId:c.id,value:t.data.value,metadata:t.data.metadata,token:s.context.token,instanceId:t.instanceId},t.data.method&&"DELETE"===t.data.method.toUpperCase()&&(f+="?token="+s.context.token,c.key&&(f+="&key="+c.key),c.id&&(f+="&fieldId="+c.id),o="DELETE",r.value=n));if(!r&&"DELETE"!==o)return"function"==typeof t.always&&t.always.call(this),Promise.resolve();l(r.instanceId,r,!0);var b=m(),w={url:"/admin/api/v1/respondents/"+b+"/data"+f,data:r,success:t.success,error:t.error,always:t.always,type:o};return g.then(function(t){return u.call(e,t,w)})},e["delete"]=function(t){return t.data?(t.data.method="DELETE",e.save(t)):Promise.resolve()},s.events.on(e,"runtime:data:registered",function(e){o(e.key,e.value)})}.call(this,s.data);var x={};(function(n){var r={},o=!1;try{var i=Object.defineProperty({},"passive",{get:function(){o=!0}});e.addEventListener("test",null,i)}catch(a){}n.on=function(e,t,n,i){var a=n;i||(i={}),!e.addEventListener&&e.attachEvent&&(a=function(){n.call(e)},r[t]=a);for(var s=t.split(" "),l=0,c=s.length;l<c;l++)e.addEventListener?e.addEventListener(s[l],a,!(!i.passive||!o)&&{passive:!0}):e.attachEvent&&e.attachEvent("on"+s[l],a)},n.off=function(e,t,n){var o=n;!e.addEventListener&&e.attachEvent&&(o=r[t]||n);for(var i=t.split(" "),a=0,s=i.length;a<s;a++)e.removeEventListener?e.removeEventListener(i[a],o,!1):e.detachEvent&&e.detachEvent("on"+i[a],o)},n.addClass=function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},n.hasClass=function(e,t){return t=" "+t+" ",1===e.nodeType&&(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(t)>=0},n.removeClass=function(e,t){var n=1===e.nodeType&&(e.className?(" "+e.className+" ").replace(/[\n\t]/g," "):"");if(n){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},n.ready=function(n){var r=!1,o=!1,i=[],a=function(e){"function"==typeof e&&i.push(e)},s=function(){for(;i.length;)i.shift()();a=function(e){e()}},l=function(){t.addEventListener?t.removeEventListener("DOMContentLoaded",l,!1):t.detachEvent("onreadystatechange",l),c()},c=function(){if(!r){if(!t.body)return setTimeout(c,1);r=!0,s()}},u=function(){var n=!1;if(!o)if(o=!0,"loading"!==t.readyState&&c(),t.addEventListener)t.addEventListener("DOMContentLoaded",l,!1),e.addEventListener("load",l,!1);else if(t.attachEvent){t.attachEvent("onreadystatechange",l),e.attachEvent("onload",l);try{n=null==e.frameElement}catch(r){}t.documentElement.doScroll&&n&&f()}},f=function(){if(!r){try{t.documentElement.doScroll("left")}catch(e){return void setTimeout(f,1)}c()}};a(n),u()}}).call(this,x),x.hasClass(t.documentElement,"ixp-prevent-animations")&&(s.flags.preventAnimations=!0),function(r,o){var a,l={};u.visibility=function(e){var t="ixp-scroll-",n=e.css=e.css||{};n.awareness=t+"aware",n.inOnce=t+"in-once",n.seen=t+"seen";var r=n.microthemes=n.microthemes||{};r.awareness="ixp-scroll-aware-util",r.inOnce="ixp-scroll-in-once-util";var o=n.states=n.states||{};o.shown=t+"in",o.hidden=t+"out",o.entering=t+"enter",o.leaving=t+"leave";var i=e.events=e.events||{},c="visibility:";return i.recalculate=c+"recalculate",i.recalculating=c+"recalculating",i.change=c+"change",o=e.states=e.states||{},o.shown="shown",o.hidden="hidden",o.entering="entering",o.leaving="leaving",e.awarenessDelay=250,s.flags.preventAnimations?e.awarenessSelector="."+n.awareness+"."+n.microthemes.awareness+", ."+n.awareness+"."+n.microthemes.inOnce:e.awarenessSelector="."+n.awareness,a=o,l[o.shown]=n.states.shown,l[o.hidden]=n.states.hidden,l[o.entering]=n.states.entering,l[o.leaving]=n.states.leaving,e}.call(this,u.visibility||{}),u.parallax=function(e){var t=e.css=e.css||{};return t.parallax="ixp-parallax",e.parallaxSelector="."+e.css.parallax,e}.call(this,u.parallax||{});var c=function(e,t){t||(t={});var r=e.getBoundingClientRect();return r.height!==n&&r.width!==n||(r={top:r.top,left:r.left,bottom:r.bottom,right:r.right,height:r.bottom-r.top,width:r.right-r.left}),t.viewport&&(r={top:r.top+(t.viewport.scrollTop||0),left:r.left+(t.viewport.scrollLeft||0),bottom:r.bottom+(t.viewport.scrollTop||0),right:r.right+(t.viewport.scrollLeft||0),height:r.bottom-r.top,width:r.right-r.left}),t.round&&(r={top:Math.ceil(r.top),left:Math.ceil(r.left),bottom:Math.ceil(r.bottom),right:Math.ceil(r.right),height:Math.ceil(r.height),width:Math.ceil(r.width)}),r},f=function(n,r){r||(r={});var o=c(n,{round:!0,viewport:r.viewport}),i=Math.ceil(r.viewport&&r.viewport.windowHeight||e.innerHeight||t.documentElement.clientHeight),s=Math.ceil(r.viewport&&r.viewport.windowWidth||e.innerWidth||t.documentElement.clientWidth);if(null==r.tolerance){if("hidden"===(e.getComputedStyle&&e.getComputedStyle(n,null).getPropertyValue("visibility")))return a.hidden;if(o.height>=i||2*o.height>i&&o.top>0)return o.top>-o.height&&o.top<i?a.shown:a.hidden;if(o.top>=0&&o.bottom<i&&o.left>=0&&o.left<s)return a.shown;if(o.top>=i||o.bottom<=0||o.left>=s||o.right<=0)return a.hidden;if("up"===r.direction){if(o.top>-(o.height/2)&&o.top+o.height/2<i)return r.element.state==a.shown?a.shown:a.entering;if(o.top>-o.height&&o.top<i)return r.element.state==a.hidden?a.hidden:a.leaving}else{if(o.top>-(o.height/2)&&o.top+o.height/2<i)return r.element.state==a.shown?a.shown:a.entering;if(o.top>-o.height&&o.top<i)return r.element.state&&r.element.state!=a.hidden?a.leaving:a.hidden}return!1}var l=!1;if(o.height>=i&&(r.tolerance=0),1===r.tolerance)l=o.top>=0&&o.bottom<=i;else if(r.tolerance<1&&r.tolerance>0){var u=1/r.tolerance,f=o.height/u;l=o.top>-f&&o.top+f<i}else l=o.top>-o.height&&o.top<i;return l&&r.edge&&("top"===r.edge?l=o.top>=0:"bottom"===r.edge&&(l=o.bottom<i)),l};if(s.fn.isInViewport=f,r){var p=i?e.LIVEBALL:n,d=[],h=[],g=function(){var e=u.visibility,n=r.call(t,e.awarenessSelector);if(!n.length)return[];for(var i,a,s=[],l=0,c=n.length;l<c;++l)i=n[l],a=o.hasClass(i,e.css.inOnce),a&&o.hasClass(i,e.css.seen)||s.push({el:i,once:a});return s},v=function(){var e=u.parallax,n=r.call(t,e.parallaxSelector);if(!n.length)return[];for(var o,i,a=new RegExp("\\b"+e.css.parallax+"-(\\d+)"),s=[],l=0,c=n.length;l<c;++l)o=n[l],i=o.className.match(a),s.push({el:o,speed:1/((i&&i[1]&&parseInt(i[1])||400)/100)});return s},m=function(){d=g(),h=v()},y=null,b=null,w=0,x="webkitAnimationEnd oanimationend MSAnimationEnd animationend",E=function(n){return null==n||null==n.scrollTop||isNaN(n.scrollTop)?(e.pageYOffset||t.documentElement.scrollTop||0)-(t.documentElement.clientTop||0):n.scrollTop},_=function(e){e||(e={});var t=E(e.viewport),n=w-t;if(0!==n||e.force)for(var r,i,c,p=0,h=d.length;p<h;++p)if(r=d[p],i=f(r.el,{element:r,direction:n>0?"up":"down",viewport:e.viewport}),r.state=i,!o.hasClass(r.el,l[i])){for(c in a)a.hasOwnProperty(c)&&o.removeClass(r.el,l[a[c]]);o.addClass(r.el,l[i]),i!==a.shown||r.seen||(r.seen=!0,o.addClass(r.el,u.visibility.css.seen),r.once&&(d.splice(p,1),p--,h=d.length,r.el.addEventListener&&function(e){var t=function(n){n.target===e&&(o.off(e,x,t),o.removeClass(e,u.visibility.css.states.shown))};o.on(e,x,t,{passive:!0})}.call(this,r.el))),s.events.trigger(u.visibility.events.change,{el:r.el,once:r.once,seen:r.seen,state:i})}w=t,y=null},k=/url\(\s*["']?([^"']+)["']?\s*\)/,P=function(e){var t=e.style.backgroundPosition.split(" ");1===t.length&&(t[0]=e.style.backgroundPositionX,t[1]=e.style.backgroundPositionY);for(var n=0,r=t.length;n<r;n++)switch(t[n]){case"left":t[n]="0%";break;case"right":t[n]="100%";break;case"top":t[n]="0%";break;case"bottom":t[n]="100%";break;case"center":t[n]="50%"}return t[0]=t[0]||"0%",t},j=function(e,t,n,r,o){var i=t.el.style.backgroundImage.match(k);if(i){var a=new Image;a.onload=function(){e.call(this,t,n,r,o)},a.src=i[1]}return!!i},A=function(e,t,n,r){e.y=(t-this.height)/r,n&&(e.el.style.backgroundPosition=e.x+" "+(e.y+n)+"px")},T=function(e){e||(e={});for(var t,r,o,i=E(e.viewport),a=0,s=h.length;a<s;++a)if(t=h[a],f(t.el,{tolerance:0,viewport:e.viewport}))if(r=-i*t.speed,o=c(t.el),t.bgPos!==n)t.el.style.backgroundPosition=t.x+" "+(t.y+r)+"px";else{var l=P(t.el);t.bgPos=l,t.x=l[0];var u=l[1];if("%"===u.charAt(u.length-1))if(u=parseInt(u,10),0===u)t.y=0;else{var p=100/u;if(t.y=o.height/p,j(A,t,o.height,r,p))continue}else t.y=parseFloat(u);r&&(t.el.style.backgroundPosition=t.x+" "+(t.y+r)+"px")}b=null},L=function(e,t){if(d.length||h.length){t||(t={});var n={options:t,cancel:!1};if(s.events.trigger(u.visibility.events.recalculating,n),!n.cancel){var r=t.force;!r&&y||!d.length||(y&&clearTimeout(y),y=setTimeout(function(){_({force:r,viewport:t.viewport})},t.delay||u.visibility.awarenessDelay)),!r&&b||!h.length||(b&&clearTimeout(b),b=setTimeout(function(){T({viewport:t.viewport})},1))}}},I=function(e){e||(e={}),e.reset&&m(),L(null,{force:!0,delay:e.delay||1,viewport:e.viewport})};o.ready(function(){if(m(),(d.length||h.length||p)&&(o.on(e,"scroll",L,{passive:!0}),o.on(e,"resize",function(e){L(e,{force:!0})},{passive:!0}),s.events.on(e,u.visibility.events.recalculate,I),L(null,{force:!0}),p))var t=new RegExp("\\b"+u.parallax.css.parallax+"\\b"),n=new RegExp("\\b"+u.visibility.css.awareness+"\\b"),r=e.setInterval(function(){if(p.App&&p.App.vent){e.clearInterval(r);var o;p.App.vent.subscribe("style:changed:background style:changed:customClass element:microtheme:applied element:microtheme:removed",function(r){if(!r||!r.classes||r.classes.match(n)||r.classes.match(t)){for(var i,a=0,s=h.length;a<s;++a)i=h[a],i.bgPos&&(i.el.style.backgroundPosition=i.bgPos.join(" "));h=[],o&&(e.clearTimeout(o),o=null),o=setTimeout(function(){I({reset:!0})},250)}})}},500)})}}.call(this,t.querySelectorAll,x),function(){s.constants.interaction=s.constants.interaction||{},s.constants.interaction={attrSelector:"[data-ixp-interaction]",triggerAttrSelector:"[data-ixp-interaction-trigger]"};var o=function(e){var t=e.name.toLowerCase(),n=t.lastIndexOf(":"),r=t.substring(0,n),o=t.substring(n+1);try{if(e.data||(e.data={}),"runtime"===r){switch(o){case"tag":return s.tag(e.data.tag,e.data.options);case"convert":return s.convert(e.data.options);case"scrollto":return s.scrollTo(e.data.anchor,e.data.options)}return Promise.reject()}var i=s.components.sendCommand&&s.components.sendCommand(o,r,e.data);return Promise.resolve(i)}catch(a){return Promise.reject(a)}},i=!1;g.then(function(a){s.ready(function(){for(var l=function(e){var t=a(this),n=t.attr("data-ixp-interaction");if(n){n=JSON.parse(n);var r=e.type,i=n[r];if(i&&i.length){"click"===r.toLowerCase()&&e.preventDefault();for(var s,l=0,c=i.length;l<c;l++){var u=i[l];u.queue===!1?o(u)["catch"](function(e){console.warn(e)}):s=s?s.then(function(){return o(u)}):o(u)}s&&s["catch"](function(e){console.warn(e)})}}},c=["click","hover"],u=a(t),f=0,p=c.length;f<p;f++){var d=c[f];u.on(d+".ixp-runtime",'[data-ixp-interaction-trigger~=":'+d+'"]',l)}var h={},g=function(t){var n=t.hash&&t.hash.toLowerCase();n&&e.location.hash.toLowerCase()!=="#"+n&&(h[n]=!0)};s.events.on(s,"runtime:scrollto:hash:changing",g),s.events.on(s,"runtime:scrollto:ignore:hash:changing",g);var v=r.debounce(s.scrollTo,100),m=function(){var t=e.location.hash;if(t){0===t.indexOf("#")&&(t=t.substring(1));var r=t.toLowerCase();h[r]?h[r]=n:v(t)}};a(e).on("hashchange.ixp-runtime",m),a(function(){i=!0,s.flags.nativeAnchorSupport&&a("a[data-ixp-hidden-anchor]").remove()})})}),function(){var t=function(n){var o=w(n);return o?void s.scrollTo(o,{updateUrlHash:!0}):void(i||(r.isFunction(e.requestAnimationFrame)?e.requestAnimationFrame(function(){t(n)}):setTimeout(function(){t(n)},10)))},n=e.location.hash;n&&(0===n.indexOf("#")&&(n=n.substring(1)),s.anchors&&s.anchors[n.toLowerCase()]&&t(n))}.call(this)}.call(this),function(){if(c=!0,0!==l.length)for(var e=0,t=l.length;e<t;e++)try{l[e]()}catch(n){console.error(n)}}.call(this)}()}(window,document);
//# sourceMappingURL=ixp-runtime.min.js.map
