!function(l){var o,n,r,c;n=o={models:{c:Lemonade.models.context,b:Lemonade.models.browser},selectors:_.extend({},Lemonade.selectors,{$popupNewQuote:""}),videosData:[{selector:".js-btn-video",url:"https://player.vimeo.com/video/361223494?autoplay=true",event:"home_watch_how_it_works_video_clicked"},{selector:".js-btn-video-de",url:"https://player.vimeo.com/video/356639442?autoplay=true",event:"home_watch_how_it_works_video_clicked"},{selector:".js-btn-video-instant-everything",url:"https://player.vimeo.com/video/361237211?autoplay=true",event:"home_watch_app_video_clicked"},{selector:".js-btn-video-instant-everything-de",url:"https://player.vimeo.com/video/356653036?autoplay=true",event:"home_watch_app_video_clicked"}],init:function(){if(n.bindTryNowCta(),n.scrollAnimations.init(),n.bindChrisrockYoutubuePopup(),n.bindVideoPopups(),n.bindStartOnboarding(),n.bindZendeskTrack(),n.handleVideoFromUrl(),r.b.isChromeIos||r.b.isAndroid){var e=function(){Lemonade.fixJumpingBorderChromeHeight(l(".section-1"))};c.$window.on("orientationchange",e),e()}},handleVideoFromUrl:function(){var e=Lemonade._getUrlParams();if(e.play_video)switch(e.play_video){case"how_it_works":l(".js-btn-video").trigger(Lemonade.clickEventType);break;case"app_video":l(".js-btn-video-instant-everything").trigger(Lemonade.clickEventType)}},bindStartOnboarding:function(){l(".js-btn-start-onboarding").on(Lemonade.clickEventType,function(){var e=l(this).data("source");"renter"!==e&&"owner"!==e||Lemonade._setLS("onboard_ownership_type",e),"renter"!==e&&"owner"!==e&&"top"!==e&&"contents"!==e&&"contents_liability"!==e&&"liability"!=e||Lemonade._event("get_"+e+"_insurance_clicked")})},bindZendeskTrack:function(){l(document).on(Lemonade.clickEventType,"#launcher",function(){Lemonade._event("help_float_button_clicked")})},bindTryNowCta:function(){c.$btnTryNow=l(".js-btn-try-now"),c.$btnTryNow.on(Lemonade.clickEventType,function(e){e.preventDefault();var t=l(this).attr("href");r.b.isMobile?(l(this).addClass("in-progress"),document.location=t):n.openChatPopup(t)})},bindChrisrockYoutubuePopup:function(){var e='<iframe id="player" type="text/html" width="640" height="390" src="https://youtu.be/QGYTy6Oc6rA?autoplay=true&showinfo=0&rel=0" frameborder="0"></iframe>',t=l(".js-popup-chrisrock"),n=c.$popupTemplate.clone();n.css({width:640,height:390}).find(".js-content").html(e),t.on(Lemonade.clickEventType,function(e){r.b.isMobile||(e.preventDefault(),n.bPopup({closeClass:"btn-close",opacity:.6,position:["auto","auto"],onOpen:function(){},onClose:function(){l(this).remove()}}))})},bindVideoPopups:function(){l.each(n.videosData,function(e,t){n.bindVideoPopup(t)})},bindVideoPopup:function(t){var e=r.b.isMobile?.85*window.innerWidth:.6*window.innerWidth,n=9*e/16-1,o='<div class="video-container"><iframe id="player" type="text/html" src="'+t.url+'" frameborder="0" allow="autoplay" allowfullscreen></iframe></div>',i=l(t.selector),a=c.$popupTemplate.clone();a.css({width:e+"px",height:n,background:"#000"}).find(".js-content").html(o),i.on(Lemonade.clickEventType,function(e){Lemonade._event(t.event),e.preventDefault(),a.bPopup({closeClass:"btn-close",opacity:.6,position:["auto","auto"],onOpen:function(){c.$html.addClass("popup-visible"),c.$body.addClass("popup-visible")},onClose:function(){c.$html.removeClass("popup-visible"),c.$body.removeClass("popup-visible"),l(this).remove()}})})},scrollAnimations:{actionsMap:[{$ele:l(".js-seconds-counter"),isOneTimeEvent:!0,callbackFun:function(){var e={$target:this.$ele,template:"{i} Sec",start:0,end:90,interval:10,initialDelay:0,onStartCallback:function(){this.$target.addClass("pulsate")},onEndCallback:function(){this.$target.removeClass("grey")}},t={$target:l(".js-section-2 .js-minutes-counter"),template:"{i} Min",start:1,end:3,interval:300,initialDelay:300,onStartCallback:function(){var e=this.$target;_.delay(function(){e.addClass("pulsate")},100)},onEndCallback:function(){this.$target.removeClass("grey")}},n=l(".js-section-2 .js-paperwork-counter");o.scrollAnimations.intigerIterator(e),o.scrollAnimations.intigerIterator(t),_.delay(function(){n.addClass("pulsate").text("Zero"),_.delay(function(){n.removeClass("grey")},500)},800)}}],intigerIterator:function(t){t.i=t.start,t.intervalFunc=null,setTimeout(function(){t.onStartCallback&&t.onStartCallback(),t.intervalFunc=setInterval(function(){var e=t.i;t.$target.text(t.template.replace("{i}",e)),t.onEachCallback&&t.onEachCallback(),e==t.end?(clearInterval(t.intervalFunc),t.onEndCallback&&t.onEndCallback()):t.i++},t.interval)},t.initialDelay)},typeWriter:function(t){t.i=0,t.intervalFunc=null,t.string=t.string.replace(t.newLineChar,"~"),setTimeout(function(){t.onStartCallback&&t.onStartCallback(),t.intervalFunc=setInterval(function(){var e=t.i;t.$target.html(t.nextString),t.onEachCallback&&t.onEachCallback(),e==t.string.length+1?(clearInterval(t.intervalFunc),t.onEndCallback&&t.onEndCallback()):(t.nextString=t.string.substring(0,e),t.nextString=t.nextString.replace("~","<br>"),t.i++)},t.interval)},t.initialDelay)},init:function(){var e=this,t=_.throttle(function(){_.each(e.actionsMap,function(e){e.isOneTimeEvent&&e.wasTriggered||!e.$ele.length||!Lemonade._isElementInViewport(e.$ele,"partial")||(e.wasTriggered=!0,e.callbackFun())})},30);c.$window.add(c.$body).on("scroll resize",t),t()}},openChatPopup:function(e){if(!c.$popupNewQuote.length){var t=c.$popupTemplate.clone();t.addClass("popup-quote").find(".js-content").html('<iframe src="'+e+'" width="100%" height="100%"/>'),c.$popupNewQuote=t,c.$popupNewQuote.appendTo("body")}c.$popupNewQuote.bPopup({closeClass:"btn-close",opacity:.6,scrollBar:!1,position:["auto","auto"],appending:!1,onOpen:function(){},onClose:function(){}})}},r=n.models,c=n.selectors,window.LmHome=o,l(document).ready(function(){o.init()})}(jQuery);