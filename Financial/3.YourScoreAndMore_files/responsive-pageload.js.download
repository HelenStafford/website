function PayerAuthenticatorFactory(){}PayerAuthenticatorFactory.getAuthenticator=function(c){switch(c.toLowerCase()){case "qualpay":return new QualpayAuthenticator;case "verifi":return new VerifiAuthenticator;default:return new VoidAuthenticator}};function PayerAuthenticator(){this.validateFunc}var submitcount=submitcount||0;
PayerAuthenticator.prototype.processEnrollmentMPI=function(){if(this.processed){submitcount=0;console.log("3ds already processed returning here");if(0==$(".frag-form-fb #register").length||0==$(".frag-form-fb div.text-danger").length&&0==$(".frag-form-fb #register div.has-error").length)return!0;console.log("Re-Submit fb flow form with 3ds here");payerAuthenticator.validateRegForm()?(console.log("process Enrollment"),this.enrollmentMPI()):"function"===typeof enableFbSbumitButton&&enableFbSbumitButton()}else payerAuthenticator.validateRegForm()?
(console.log("process Enrollment"),this.enrollmentMPI()):0!=$(".frag-form-fb #register").length&&"function"===typeof enableFbSbumitButton&&enableFbSbumitButton();return!1};PayerAuthenticator.prototype.validateRegForm=function(){return this.validateFunc()};
function processPostMpiTransaction(){console.log("In processPostMpiTransaction ");payerAuthenticator.timer&&clearInterval(payerAuthenticator.timer);!0===!payerAuthenticator.processed?(payerAuthenticator.processed=!0,0==$(".frag-form-fb #register").length?(document.register.submit(),displayOverlaySpinner($("#buttonStep2"))):submitFbFlowForm(payerAuthenticator.cardType,$(".frag-form-fb #register")),console.log("processPostMpiTransaction is submitting signup form")):0==$(".frag-form-fb #register").length||
0==$(".frag-form-fb div.text-danger").length&&0==$(".frag-form-fb #register div.has-error").length?console.log("processPostMpiTransaction is not submitting signup form, because it has already been submitted"):(console.log("processPostMpiTransaction is submitting signup form"),submitFbFlowForm(payerAuthenticator.cardType,$(".frag-form-fb #register")))}
function submitFbFlowForm(c,a){var b=$(".frag-form-fb #register #registerButton");a=$(b).parent().attr("fb-current-fragment");var d=$(b).parent().attr("fb-flow-id"),b=$(b).parent().attr("fb-container-location");a="fbFlowID\x3d"+d+"\x26fragmentValue\x3d"+a+"\x26adContainerId\x3d"+b+"\x26firstLoad\x3dfalse";a=a+(""!=a?"\x26":"")+$(".frag-form-fb").find("form").serialize();$.ajax({url:"/fbFlowSignup.ajax",type:"POST",data:a+"\x26processSignup\x3dtrue\x26skiptccheck\x3dtrue\x26optionaladdress\x3dfalse",
success:function(a){"success"==a.result&&(window.location.href="/navigate.html?cctype\x3d"+c,$(".frag-form-fb #register #registerButton").removeClass("hidden d-none"),$(".frag-form-fb #register #registerButton.btn-spinner-display").addClass("hidden d-none"));if("fail"==a.result){if(""!=a.failedText)if(0!=$(".frag-form-fb div.text-danger").length)$(".frag-form-fb div.text-danger").html(a.failedText);else{var b="\x3cdiv class\x3d'text-danger text-error'\x3e "+a.failedText+" \x3c/div\x3e";$(".frag-form-fb #register").before(b)}""!=
a.addField&&1==a.addField&&""!=a.fieldName&&0==$(".frag-form-fb #register div.has-error").length&&(a="\x3cdiv class\x3d\"form-group has-error\"\x3e\x3cinput class\x3d'form-control' required\x3d'required' placeholder\x3d'"+a.fieldName+"' type\x3d'text' name\x3d'cust"+a.fieldName.toLowerCase()+"' value\x3d'"+a.fieldValue+"' style\x3d'border-color: #red;' \x3e\x3c/div\x3e",$(".frag-form-fb #register").prepend(a));"function"===typeof enableFbSbumitButton&&enableFbSbumitButton()}},error:function(a){"function"===
typeof enableFbSbumitButton&&enableFbSbumitButton();window.location.href="/signup.html"}})}
function displayOverlaySpinner(c){c=$(c).parent();var a=$(".btn:visible",c).width(),b=$(".btn:visible",c).first().clone();$(".btn",c).addClass("hidden d-none");0==$(".registration .btn-spinner-display").length?($(b).addClass("disabled btn-spinner-display"),"button"==$(b).prop("tagName").toLowerCase()&&($(b).attr("type","button"),$(b).prop("type","button"),$(b).prop("disabled",!0)),$(b).html('\x3ci class\x3d"fa fa-spinner fa-spin fa-1x fa-fw"\x3e\x3c/i\x3e'),$(c).append(b)):$(".registration .btn-spinner-display").removeClass("hidden d-none");
$(".registration .btn-spinner-display").width(a)}function VoidAuthenticator(){}VoidAuthenticator.prototype=new PayerAuthenticator;VoidAuthenticator.prototype.constructor=VoidAuthenticator;VoidAuthenticator.prototype._super=PayerAuthenticator;VoidAuthenticator.prototype.enrollmentMPI=function(){processPostMpiTransaction()};function QualpayAuthenticator(){}QualpayAuthenticator.prototype=new PayerAuthenticator;QualpayAuthenticator.prototype.constructor=QualpayAuthenticator;
QualpayAuthenticator.prototype._super=PayerAuthenticator;QualpayAuthenticator.provider="qualpay";
QualpayAuthenticator.prototype.enrollmentMPI=function(){try{0==$(".frag-form-fb #register").length&&displayOverlaySpinner($("#buttonStep2"));var c=encodeURIComponent($("input[name\x3dccnumber]").val().replace(/[ ]/g,"")),a=encodeURIComponent($("select[name\x3dccmonth]").val()),b=encodeURIComponent($("select[name\x3dccyear]").val());if(("undefined"===a||"undefined"===b)&&$("#ccexpiry").length)var d=$("#ccexpiry").val().split("/"),a=encodeURIComponent(FormFlex.getMonthName(d[0])),b=encodeURIComponent("20"+
d[1]);else if(("undefined"===a||"undefined"===b)&&!$("#ccexpiry").length)var e=$("input[name\x3dccmonth]").val(),a=encodeURIComponent(FormFlex.getMonthName(e)),b=encodeURIComponent($("input[name\x3dccyear]").val());var f={ccNum:c,cardType:payerAuthenticator.cardType,amount:payerAuthenticator.authAmount,ccMon:a,ccYear:b,idMerchant:mid,gracePeriod:payerAuthenticator.gracePeriod,provider:QualpayAuthenticator.provider},g=Date.now();$.ajax({url:"/3DSEnrollment.ajax",method:"POST",timeout:1E3*payerAuthenticator.enrollmentTimeout,
data:f}).done(function(a){"Y"==a.enrollment&&0<payerAuthenticator.gracePeriod?0<payerAuthenticator.gracePeriod?(payerAuthenticator.authenticateMPI(a),payerAuthenticator.gracePeriodEnd=Date.now()+1E3*payerAuthenticator.gracePeriod,payerAuthenticator.timer=window.setInterval(function(){payerAuthenticator.checkAuthenticateMPI()},100),payerAuthenticator.enrollStartTimeInMillis=g,payerAuthenticator.idMpi=a.idMpi,payerAuthenticator.waitForAuthForm()):processPostMpiTransaction():processPostMpiTransaction()}).fail(function(a){console.log("failed enrollment",
a);processPostMpiTransaction()})}catch(h){console.log("EnrollmentMPI error",h),0!=$(".frag-form-fb #register").length&&"function"===typeof enableFbSbumitButton&&enableFbSbumitButton()}};
QualpayAuthenticator.prototype.authenticateMPI=function(c){try{var a='\x3cform name\x3d"acsPost" action\x3d"'+c.acsUrl+'" method\x3d"POST"\x3e \x3cinput name\x3d"TermUrl" value\x3d"'+payerAuthenticator.contextUrl+"/3DSAuthentication.html?provider\x3d"+QualpayAuthenticator.provider+'" /\x3e\x3cinput name\x3d"PaReq" value\x3d"'+c.payerAuthenticationRequest+'" /\x3e\x3cinput name\x3d"MD" value\x3d"'+c.idMpi+'" /\x3e\x3c/form\x3e\x3cscript\x3etry{document,document.acsPost.submit()}catch(ex){document.mpiEnrollIframe.document.acsPost.submit()}\x3c/script\x3e',
b=$('\x3ciframe name\x3d"mpiEnrollIframe" src\x3d"about:blank" frameborder\x3d"0" scrolling\x3d"no" class\x3d"mpiEnrollment" width\x3d"480" height\x3d"400"\x3e\x3c/iframe\x3e'),d=$('\x3cdiv id\x3d"wrap3ds"\x3e\x3c/div\x3e');"undefined"!==encodeURIComponent($("button[id\x3dbuttonStep2]").val())?(console.log("authenticateMPI buttonStep2"),d.insertBefore("#buttonStep2")):"undefined"!==encodeURIComponent($("button[id\x3dregisterButton]").val())&&(console.log("authenticateMPI registerButton"),d.insertBefore("#registerButton"));
b.appendTo("#wrap3ds").contents().find("body").html(a)}catch(e){console.log("authenticateMPI error",e)}};QualpayAuthenticator.prototype.checkAuthenticateMPI=function(c){Date.now()>payerAuthenticator.gracePeriodEnd&&processPostMpiTransaction()};
QualpayAuthenticator.prototype.waitForAuthForm=function(){try{if($('iframe[name\x3d"mpiEnrollIframe"]').contents().find('form[name\x3d"postPAResToMPIForm"]'),0<$('iframe[name\x3d"mpiEnrollIframe"]').contents().find('form[name\x3d"postPAResToMPIForm"]').length){payerAuthenticator.enrollEndTimeInMillis=Date.now();var c=payerAuthenticator.enrollEndTimeInMillis-payerAuthenticator.enrollStartTimeInMillis;console.log("MPI enrollment form load time in millis:"+c);$('iframe[name\x3d"mpiEnrollIframe"]').contents().find('form[name\x3d"postPAResToMPIForm"]').submit(payerAuthenticator.logAuthTime)}else console.log("MPI enrollment form STILL loadING duration in millis:"+
(Date.now()-payerAuthenticator.enrollStartTimeInMillis)),setTimeout(function(){payerAuthenticator.waitForAuthForm()},200)}catch(a){payerAuthenticator.enrollEndTimeInMillis=Date.now(),c=payerAuthenticator.enrollEndTimeInMillis-payerAuthenticator.enrollStartTimeInMillis,console.log("MPI enrollment form load time in millis(from catch section):"+c),$.post("/3DSEnroll-trck.ajax",{MD:payerAuthenticator.idMpi,eDuration:c})}};
QualpayAuthenticator.prototype.logAuthTime=function(){try{console.log("authenticateMPI.enrollEndTimeInMillis without parent:"+payerAuthenticator.enrollEndTimeInMillis)}catch(c){console.log("authenticateMPI.enrollEndTimeInMillis without parent did not work. authenticateMPI.enrollEndTimeInMillis WITH parent:"+parent.authenticateMPI.enrollEndTimeInMillis)}console.log("Time it took to auth:"+(Date.now()-parent.authenticateMPI.enrollEndTimeInMillis))};function VerifiAuthenticator(){}
VerifiAuthenticator.prototype=new PayerAuthenticator;VerifiAuthenticator.prototype.constructor=VerifiAuthenticator;VerifiAuthenticator.prototype._super=PayerAuthenticator;VerifiAuthenticator.provider="verifi";var payerAuthenticator=new PayerAuthenticator;
VerifiAuthenticator.prototype.enrollmentMPI=function(){try{var c=encodeURIComponent($("input[name\x3dccnumber]").val().replace(/[ ]/g,"")),a=$("select[name\x3dccmonth]").prop("selectedIndex"),b=$("select[name\x3dccyear]").val();if(void 0!==a||void 0!==b)a=encodeURIComponent(10>a?"0"+a:a.toString()),b=encodeURIComponent(b);else if((void 0===a||void 0===b)&&0!=$("#ccexpiry").length)var d=$("#ccexpiry").val().split("/"),a=parseInt(d[0]),b="20"+d[1],a=encodeURIComponent(10>a?"0"+a:a.toString()),b=encodeURIComponent(b);
else if((void 0===a||void 0===b)&&0==$("#ccexpiry").length)var e=$("input[name\x3dccmonth]").val(),a=encodeURIComponent(FormFlex.getMonthName(e)),b=encodeURIComponent($("input[name\x3dccyear]").val());var f=encodeURIComponent($("input[name\x3dcustfname]").val()),g=encodeURIComponent($("input[name\x3dcustlname]").val()),h=encodeURIComponent($("input[name\x3dcustemail]").val()),l=encodeURIComponent($("input[name\x3dphone]").val()),m=encodeURIComponent($("input[name\x3dcustzip]").val()),k=""+payerAuthenticator.authAmount;
VerifiAuthenticationVariables.close_location=payerAuthenticator.contextUrl;VerifiAuthenticationVariables.form_id="register";VerifiAuthenticationVariables.cc_amount=k.toString();VerifiAuthenticationVariables.cc_number=c;VerifiAuthenticationVariables.cc_expiration_month=a;VerifiAuthenticationVariables.cc_expiration_year=b;VerifiAuthenticationVariables.cc_product_group=payerAuthenticator.product_group;VerifiAuthenticationVariables.billing_first_name=f;VerifiAuthenticationVariables.billing_last_name=
g;VerifiAuthenticationVariables.billing_phone=l;VerifiAuthenticationVariables.billing_email=h;VerifiAuthenticationVariables.billing_postal_code=m;VerifiAuthenticationVariables.billing_country_code="US";payerAuthenticator.ccNum=c;var n={ccNum:c,cardType:payerAuthenticator.cardType,amount:k,ccMon:FormFlex.initiated?FormFlex.getMonthName(a):0!=$("input[name\x3dccmonth]").length?a:encodeURIComponent($("select[name\x3dccmonth]").val()),ccYear:b,gracePeriod:payerAuthenticator.gracePeriod,provider:VerifiAuthenticator.provider};
$.ajax({url:"/3DSEnrollment.ajax",method:"POST",dataType:"json",data:n}).done(function(a){console.log("3DSEnrollment.ajax succeeded",a);"Y"==a.enrollment?(payerAuthenticator.idMpi=a.idMpi,console.log("Before Manual Start"),void 0!=document.register?VerifiAuthentication.manualStart(document.register):VerifiAuthentication.manualStart($(".frag-form-fb").find("#register")),$("html, body").animate({scrollTop:"0px"})):processPostMpiTransaction()})}catch(p){console.log("EnrollmentMPI error",p),0!=$(".frag-form-fb #register").length&&
"function"===typeof enableFbSbumitButton&&enableFbSbumitButton()}};VerifiAuthenticator.prototype.trackResponse=function(c){console.log("status: "+c+", trackResponse function is called");$.ajax({url:"/3DSAuthentication.html",method:"POST",dataType:"html",data:{MD:payerAuthenticator.idMpi,PaRes:c,provider:VerifiAuthenticator.provider}}).done(function(a){console.log("3DSAuthentication succeeded",a)}).fail(function(a){console.log("3DSAuthentication failed",a)}).always(function(){processPostMpiTransaction()})};function safeThisSrc(a,b){null!=a&&null!=b&&0>a.src.indexOf(b)&&(a.src=b)}var submitcount=submitcount||0;
function validateRegForm(){$("#addressDiv").is(":hidden")&&$("#optionaladdress").val("true");if($("#step2").is(":hidden")&&"step1"==$("#formstep").val())validateAndSubmitStep1();else{if($("#signup-captcha").length&&$("#captchaChecked").is(":not(:checked)"))return alert("Please verify you are not a robot."),!1;if(validateStep1()&&validateStep2()&&validateStripeFields()&&validateTermsAndConditions()&&isHoneypotValid()&&isValidGoogleCaptcha()){submitcount++;if(1<submitcount)return alert("Only one click on SUBMIT is needed. We are verifying your account information. Thank you for your patience."),
!1;"mobile"==document.register.deviceType.value&&null!=document.register.repleadMobile&&document.register.repleadMobile.checked&&submitBuyerLead();return $("#stripeToken").length&&0==$("#stripeToken").val().length?(stripeCreateToken(),submitcount=0,!1):!0}}return!1}var leadTypes=leadTypes||null;function nolead(){leadTypes=void 0;validateAndSubmitStep1()}
function leadSubmissionEasyTcpa(){var a=[];$("#reg-checkbox").find("input").each(function(){var b=$(this).attr("value").trim().split(",");($(this).is(":checkbox")&&$(this).is(":checked")&&0<b.length||$(this).is(":hidden"))&&b.forEach(function(b){a.push(b)})});0!=a.length&&a.forEach(function(a){submitLead(a,"fbFlow")})}
function loadNextFragment(a,b,c,d,f,e,k){var h=!0;"undefined"!=typeof flowName&&""!=flowName&&(f=flowName);-1<b.indexOf("ajax")&&$.ajax({async:!1,url:b,type:"POST",data:c+"\x26flowName\x3d"+f,success:function(b){$("#"+k).modal("show");var g="easyOptinFlow"==f?$(".curseq.optin").val():$(".curseq.flow").val(),h="easyOptinFlow"==f?".seq.optin":".seq.flow";"easyOptinFlow"==f?$("#easyFbFlow").html(b):$("#fbFlow").html(b);b=findObjectByKey("easyOptinFlow"==f?easyFbArray:fbArray,"fragmentDisplaySequence",
g);var g="easyOptinFlow"==f?$(".curseq.optin").val():$(".curseq.flow").val(),l=findObjectByKey("easyOptinFlow"==f?easyFbArray:fbArray,"fragmentDisplaySequence",g);d=g;"undefined"!=typeof l&&null!==l&&"undefined"!=l&&"lightbox"==e&&($("#"+k).addClass(l.fragmentName),"undefined"!=typeof b&&null!==b&&"undefined"!=b&&l.fragmentName!=b.fragmentName&&$("#"+k).removeClass(b.fragmentName));isNaN(d)||(gaTrackPageView(getTrackingUrl()),trackSalesWaterfall("fb-"+g,"","","","",""));-1<c.indexOf("history")&&-1<
c.indexOf("cache\x3dtrue")?($("input[name\x3dcache]")?$("input[name\x3dcache]").val(!0):'\x3cinput type\x3d"hidden" name\x3d"cache" value\x3d"true" /\x3e'.insertAfter("#fbFlow"),1>$(".seq").length&&$('\x3cinput type\x3d"hidden" name\x3d"nextFragmentSequence" class\x3d"seq flow"/\x3e').insertAfter("#fbFlow")):$("input[name\x3dcache]")&&$("input[name\x3dcache]").val(!1);("easyOptinFlow"==f?easyFbArray.length:fbArray.length)>=+d+1?$(h).val(+d+1):$(h).remove();"page"==e&&0>c.indexOf("history")&&history.pushState("",
"","?fragment\x3d"+(""!=g||void 0!=g||"undefined"!=typeof g?g:"easyOptinFlow"==f?easyFbArray.length:fbArray.length));$.post("/fbFlowTracking.ajax","adid\x3d"+a+"\x26flowName\x3d"+f+"\x26type\x3dform_view\x26currentFragSeq\x3d"+(""!=g||void 0!=g||"undefined"!=typeof g?g:null))},error:function(a){h=!1}});return h}function findObjectByKey(a,b,c){for(var d=0;d<a.length;d++){var f=a[d];console.log("Obj : "+f);console.log("ObjeKey: "+f[b]);if(f[b]==c)return f}return null}
function validateAndSubmitStep1(){var a=$(document).find(".disclosure-text"),b=!1;if(validateStep1()){ROAS.pixelForStep1();var c="custfname\x3d"+document.register.custfname.value+"\x26",c=c+("custlname\x3d"+document.register.custlname.value+"\x26");void 0!=document.register.custaddress&&""!=document.register.custaddress.value&&(c+="custaddress\x3d"+document.register.custaddress.value+"\x26");void 0!=document.register.custzip&&""!=document.register.custzip.value&&(c+="custzip\x3d"+document.register.custzip.value+
"\x26");c+="custemail\x3d"+document.register.custemail.value+"\x26";null!=document.register.eoformlocation&&null!=document.register.eoformlocation.value&&""!=document.register.eoformlocation.value&&(c+="eoformlocation\x3d"+document.register.eoformlocation.value+"\x26");c+="custphone\x3d"+document.register.phone.value+"\x26";if(null!=document.register.promotion)try{c="hidden"==$(document.register.promotion).attr("type")?c+"promotion\x3dtrue\x26":c+("promotion\x3d"+document.register.promotion.checked+
"\x26")}catch(d){console.log("promo error :: "+d)}c+="regsource\x3dStep1\x26";"undefined"!=(typeof easyTcpa).toLowerCase()&&"true"==easyTcpa?(leadSubmissionEasyTcpa(),$("#reg-checkbox").find("input").each(function(){"true"==$(this).attr("data-fblightbox")&&($(this).is(":checkbox")&&$(this).is(":checked")||$(this).is(":hidden"))&&("undefined"!=(typeof fbflowLightbox).toLowerCase()&&fbflowLightbox||"undefined"!=(typeof fbflowSignup).toLowerCase()&&fbflowSignup)&&(b=!0)}),b?0==loadFBFlow()&&loadRegPageStep2():
loadRegPageStep2()):"undefined"==(typeof fbflowAd).toLowerCase()&&("undefined"!=(typeof fbflowLightbox).toLowerCase()&&fbflowLightbox&&null!=document.register.tcpa&&document.register.tcpa.checked||"undefined"!=(typeof fbflowSignup).toLowerCase()&&fbflowSignup)?0==loadFBFlow()&&loadRegPageStep2():"undefined"!=(typeof fbflowLightbox).toLowerCase()&&fbflowLightbox&&null!=document.register.tcpa&&document.register.tcpa.checked||"undefined"!=(typeof fbflowAd).toLowerCase()&&fbflowAd?$("#display-container-lb-signup-lightbox").modal("show"):
loadRegPageStep2();postRegPageEO(c);null!=document.register.submitlistmanagementlead&&"true"==document.register.submitlistmanagementlead.value&&submitListManagementLead();null!=document.register.replead&&document.register.replead.checked&&submitBuyerLead();(null!=document.register.tcpa&&document.register.tcpa.checked||void 0==document.register.tcpa&&0<a.length)&&"undefined"!=(typeof leadTypes).toLowerCase()&&null!=leadTypes&&""!=leadTypes&&leadTypes.forEach(function(a){submitLead(a)});0<a.length&&
"undefined"!=(typeof leadTypes2).toLowerCase()&&null!=leadTypes2&&""!=leadTypes2&&leadTypes2.forEach(function(a){submitLead(a)})}}
function validateStep1(){document.register.custfname.value=trimText(document.register.custfname.value);document.register.custlname.value=trimText(document.register.custlname.value);document.register.custemail.value=trimText(document.register.custemail.value);if(""==document.register.custfname.value)return document.register.custfname.focus(),alert("Please provide first name."),!1;if(""==document.register.custlname.value)return document.register.custlname.focus(),alert("Please provide last name."),
!1;if(-1==document.register.custemail.value.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/))return document.register.custemail.focus(),alert("Please provide a valid email address."),!1;if(0==document.register.custemail.value.indexOf("www."))return document.register.custemail.focus(),alert("Please provide a valid email address by removing the 'www.' in front."),!1;if(-1==document.register.phone.value.replace(/\s/g,"").search(/^\(?\d{3}\)?-?\d{3}-?\d{4}$/))return document.register.phone.focus(),
alert("Please provide a valid phone number."),!1;if($("#addressDiv").is(":hidden")||void 0==document.register.custaddress||""!=document.register.custaddress.value){if(void 0!=document.register.custzip&&-1==document.register.custzip.value.search(/^\d{5}(-?\d{4})?$/))return document.register.custzip.focus(),alert("Please provide a valid zip code."),!1;$("#addressDiv").is(":hidden")&&(isMobileView()?$("#custaddress").val($("#mobileDefaultAddress").val()):$("#custaddress").val($("#desktopDefaultAddress").val()));
return!0}document.register.custaddress.focus();alert("Please provide a street address.");return!1}
function validateStep2(){if($("#stripeToken").length)return!0;0<=document.register.ccnumber.value.indexOf("-")&&(document.register.ccnumber.value=document.register.ccnumber.value.replace(/-/g,""));if(null==document.register.cctype||$("#cctype").is(":hidden")||"null"!=document.register.cctype.value){if((isNaN(document.register.ccnumber.value)||13>document.register.ccnumber.value.length)&&!$.payment.validateCardNumber($("#register #ccnumber").val()))return document.register.ccnumber.focus(),alert("Please provide a valid Credit Card #"),
!1;if(null!=document.register.ccmonth&&"zero"==document.register.ccmonth.value)return alert("You have entered an invalid credit card expiration month."),document.register.ccmonth.focus(),!1;if(null!=document.register.ccyear&&"zero"==document.register.ccyear.value)return alert("You have entered an invalid credit card expiration year."),document.register.ccyear.focus(),!1;if(null!=document.register.ccexpiry&&-1==$("#register #ccexpiry").val().replace(/[/]/g,"").search(/^\d{4}$/))return alert("You have entered an invalid credit card expiration year."),
$("#register #ccexpiry").focus(),!1;if(isNaN(document.register.cccvv2.value)||document.register.cccvv2.value.length<document.register.cccvv2.maxLength){var a="",b="3";null==document.register.cctype||""==document.register.cctype.value||$("#cctype").is(":hidden")?null!=document.register.cctype&&$("#cctype").is(":hidden")&&(b=document.register.cccvv2.maxLength):(a=document.register.cctype.options[document.register.cctype.selectedIndex].text,b=document.register.cccvv2.maxLength);""!=a&&(a=" "+a);document.register.cccvv2.focus();
alert("Your"+a+" card verification number should contain "+b+" digits. Please re-enter the full card verification number.");return!1}if(null!=document.register.billingzip&&-1==document.register.billingzip.value.search(/^\d{5}(-?\d{4})?$/))return document.register.billingzip.focus(),alert("Please provide a valid billing zip code."),!1;if(null!=document.register.cctype&&"null"!=document.register.cctype.value&&!validateCreditCardType(!0)||!isValidAcceptedCard(document.register.ccnumber.value,document.register.acceptedCards.value))return!1}else return document.register.cctype.focus(),
alert("Please select a credit card type."),!1;return!0}function isValidAcceptedCard(a,b){a=$.payment.cardType(a);"amex"==a&&(a="americanexpress");return(null!=b||""!=b)&&0>b.split(",").indexOf(a)?(alert("Sorry, we don't accept "+a+", please use "+b.replace(/[^a-zA-Z0-9]/g,"/")),document.register.ccnumber.focus(),!1):!0}
function validateStripeFields(){if($("#stripeToken").length){if(!validCardNumber)return alert("Please provide a valid Credit Card #"),!1;if(!validCardExpiry)return alert("Please provide a valid credit card expiration date."),!1;if(!validCardCvc)return alert("Please provide a valid credit card CVV #."),!1}return!0}
function validateTermsAndConditions(){null==document.getElementById("termsCheckbox")||$("#termsCheckbox input[type\x3dcheckbox]").is(":hidden")?$("#skiptccheck").val("true"):$("#skiptccheck").val("false");if(null!=document.register.skiptccheck&&"true"==document.register.skiptccheck.value||document.register.tccheck.checked)return!0;alert("You need to agree the terms and conditions to continue....");return!1}
function goToRegPageStep2(){trackWaterfall("signup-step2");2==document.register.length?document.register[0].formstep.value="step2":document.register.formstep.value="step2";$(".formstep").removeClass("collapse");$(".formstep").removeClass("hidden-xs");$("#buttonStep1").addClass("hidden");$("#buttonStep2").removeClass("visible-xs");$(".frag-dynamic-light").length||($("#buttonStep2").removeClass("hidden-xs"),$("#buttonStep2").show());"true"==$("#hideStep1").val()&&($("#step1Heading").hide(),$("#step1").hide());
"true"==$("#hideTermsStep2").val()?$("#termsBox").addClass("hidden"):$("#termsBox").removeClass("hidden");"true"==$("#showDisclosureBoxStep2").val()&&$("#disclosureBox").removeClass("visible-xs");isMobileView()&&$("#reg-checkbox").hide()}function loadRegPageStep2(){goToRegPageStep2();$("html, body").animate({scrollTop:$("#step2").offset().top},1E3)}function postRegPageEO(a){$.post("/eopost.ajax",a)}function trimText(a){return null!=a?a.replace(/^\s*/,"").replace(/\s*$/,""):""}
function gaTrackSignupError(a){gaTrackPageView("signup#error-"+a)}function getXmlHttpObject(){var a;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){a=new ActiveXObject("Microsoft.XMLHTTP")}}return a}
function validateCreditCardType(a){var b=!1,c=["visa","mastercard","americanexpress","discover"],d=["34","37"],f=["65","6011"],e=["51","52","53","54","55"],k=["4"],h=document.register.ccnumber.value,l=document.register.cctype.options[document.register.cctype.selectedIndex].value;l==c[0]&&(h.substring(0,1)==k[0]&&(b=!0),!b&&a&&alert("Please confirm your Visa card number corresponds to the Visa card type"));if(l==c[1]){for(k=0;k<e.length;k++)if(h.substring(0,2)==e[k]){b=!0;break}if(!b)try{var g=parseInt(h.substring(0,
6));222100<=g&&272099>=g&&(b=!0)}catch(m){}!b&&a&&alert("Please confirm your Mastercard number corresponds to the Mastercard card type")}if(l==c[2]){for(e=0;e<d.length;e++)if(h.substring(0,2)==d[e]){b=!0;break}!b&&a&&alert("Please confirm your American Express card number corresponds to the American Express card type")}l==c[3]&&(h.substring(0,2)==f[0]&&(b=!0),h.substring(0,4)==f[1]&&(b=!0),!b&&a&&alert("Please confirm your Discover card number corresponds to the Discover card type"));return b}
function NewWindowTarget(a,b,c,d){window.open(a,b,"toolbar\x3dno,location\x3dno,directories\x3dno,status\x3dno,menubar\x3dno,scrollbars\x3dyes,resizable\x3dyes,copyhistory\x3dno,width\x3d"+c+",height\x3d"+d).focus()}function geturlparam(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?\x26]"+a+"\x3d([^\x26#]*)")).exec(window.location.href);return null==a?"":a[1]}function submitBuyerLead(){submitLead("buyer")}function submitListManagementLead(){submitLead("listManagement")}
function submitLead(a,b){if(leadSubmissionTypes&&-1<leadSubmissionTypes.indexOf(a))ROAS["pixelForLeadType"+a]();var c="",c=("buyer"==a||"agent"==a?c+"leadType\x3dagent\x26agentLeadType\x3dbuy\x26":"listManagement"==a||"list_management"==a?c+"leadType\x3dlist_management\x26dataType\x3demail_phone\x26leadFormLocation\x3dcore\x26":c+("leadType\x3d"+a+"\x26"))+("idBrand\x3d"+document.register.brandid.value+"\x26"),c=c+("adid\x3d"+document.register.adid.value+"\x26"),c=c+("captureLocation\x3d"+(b?b:document.register.capturelocation.value)+
"\x26"),c=c+("adLocation\x3d"+(b?b:"sales_reg_step1")+"\x26")+("leadFormUrl\x3d"+encodeURIComponent(window.location)+"\x26"),c=c+("formType\x3d"+document.register.leadformtype.value+"\x26"),c=c+("email\x3d"+document.register.custemail.value+"\x26");null!=document.register.custzip&&""!=document.register.custzip.value&&(c+="zip\x3d"+document.register.custzip.value+"\x26",c+="zipcodes\x3d"+document.register.custzip.value+"\x26");null!=document.register.custfname&&""!=document.register.custfname.value&&
(c+="firstName\x3d"+document.register.custfname.value+"\x26");null!=document.register.custlname&&""!=document.register.custlname.value&&(c+="lastName\x3d"+document.register.custlname.value+"\x26");null!=document.register.phone1&&""!=document.register.phone1.value&&(c+="phone\x3d"+document.register.phone1.value+document.register.phone2.value+document.register.phone3.value+"\x26");null!=document.register.phone&&""!=document.register.phone.value&&-1==c.indexOf("\x26phone\x3d")&&(a=document.register.phone.value.replace(/[^\d]/g,
""),""!=a&&(c+="phone\x3d"+a+"\x26"));$.post("/Membersite/lead.ajax",c)}function openTermsPopUp(){window.open("/terms-of-use.html","help","scrollbars\x3dyes,toolbar\x3dno,width\x3d750,height\x3d480").focus()}function checkConfirmationSubmit(){confirmationsubmitcount++;if(1!=confirmationsubmitcount)return!1}
function checkCvv2Length(){"americanexpress"==document.register.cctype.value?document.register.cccvv2.maxLength=4:(4==document.register.cccvv2.maxLength&&(document.register.cccvv2.value=""),document.register.cccvv2.maxLength=3)}function checkCvv2LengthByCCNumber(){0<=document.register.ccnumber.value.search(/^3[47]/)?document.register.cccvv2.maxLength=4:(4==document.register.cccvv2.maxLength&&(document.register.cccvv2.value=""),document.register.cccvv2.maxLength=3)}
function offerAccept(){$("#submitOffer").attr("disabled",!0);$("#buttonContent").hide();$("#processingContent").html("\x3cdiv id\x3d'processing-text-large'\x3eProcessing order. Please wait...\x3c/div\x3e\x3cdiv align\x3d'center'\x3e\x3cimg src\x3d'/resources/images/loading_med.gif'/\x3e\x3c/div\x3e");$("#processingContent").removeClass("hidden");isMobileView()&&$("#hideLightboxDisplay").val("true");ROAS.fields.amount=$("#extOfferAmount").val();ROAS.pixelForSSI();return!0}
function packageAccept(a){$(".btn").attr("disabled",!0);$(".btn").css("display","none");$("#processingContent").removeClass("hidden");ROAS.fields.amount=a;ROAS.pixelForSSI();return!0}function upsellDecline(){$("#submitDecline").attr("disabled",!0);return!0}
function upsellConfirm(){$("#submitConfirm1").attr("disabled",!0);$("#submitConfirm2").attr("disabled",!0);$("#buttonContentOrderConfirmationDiv").html("\x3cdiv id\x3d'processing-text-small'\x3ePlease wait...\x3c/div\x3e\x3cdiv align\x3d'center'\x3e\x3cimg src\x3d'/resources/images/loading_med.gif'/\x3e\x3c/div\x3e");gaTrackPageView("ssi-lightbox-orderconfirm-submitted");return!0}
function showOrderConfirmationDiv(){document.upsellOfferFormAccept.lightboxDisplay.value="orderConfirmation";$("#confirmation-bglayer").css("display","inline");$("#confirmation-bglayer").css("height",document.body.clientHeight+"px");window.onresize=function(){showOrderConfirmationDiv()};gaTrackPageView("ssi-lightbox-orderconfirm")}function validateSearchQuery(){return validateSearchInput(isMobileView()?document.getElementById("qs-text-mobile"):document.getElementById("qs-text"))}
var leadgensection=leadgensection||"";function validateLeadgenSearchQuery(){leadgensection="search";validateSearchQuery()&&runLeadGenAndUpdatePage();return!1}
function validateSearchInput(a){var b=!1,c=a.value;if(0<c.length){var d=!1,f="",e=(new Date).getTime();$.ajax({type:"GET",url:"/Membersite/property/search/searchTypeAhead.ajax",data:{q:c,limit:150,timestamp:e},dataType:"text",async:!1,error:function(){d=!1},success:function(a){f=a;d=!0}});if(d){var e=0,k=f.split("\n"),h=k.length;if(/^\d+$/.test(c)&&5==c.length&&1<=parseInt(c,10)&&99999>=parseInt(c,10))for(e;e<h;e++)0==k[e].toLowerCase().indexOf(c.toLowerCase(),0)&&(b=!0);else for(e;e<h;e++)k[e].toLowerCase()==
c.toLowerCase()&&(b=!0)}if(!b){e=c.split(" ").pop();if(4<=c.length&&0>=c.indexOf(",")&&2==e.length)return b=a.value.lastIndexOf(e),b=a.value.substr(0,b-1)+", "+e,a.value=b,!0;alert('Please enter a valid zip code or city, state separated by a comma such as "90210" or "Beverly Hills, CA" (without the quotes)');a.focus()}}else alert("Please enter a search text."),a.focus();return b}
function resizeIframe(a,b){var c=null;try{c=a.contentWindow.document.body.offsetHeight}catch(d){}null!=c&&("undefined"!=typeof b&&(c+=b),a.style.height=c+"px")}function resizeMiniSearchIFrame(){resizeIframe(document.getElementById("minisearch"),20)}
function validateEOForm(){if("undefined"!=typeof document.eoform.custfname){if(""==document.eoform.custfname.value)return document.eoform.custfname.focus(),alert("Please provide a first name."),!1;if(isExtendedValidation()&&2>document.eoform.custfname.value.length)return document.eoform.custfname.focus(),alert("First name must contain 2 or more characters."),!1}if("undefined"!=typeof document.eoform.custlname){if(""==document.eoform.custlname.value)return document.eoform.custlname.focus(),alert("Please provide a last name."),
!1;if(isExtendedValidation()&&2>document.eoform.custlname.value.length)return document.eoform.custlname.focus(),alert("Last name must contain 2 or more characters."),!1}if(-1==document.eoform.custemail.value.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/))return document.eoform.custemail.focus(),alert("Please provide a valid email address."),!1;if(0==document.eoform.custemail.value.indexOf("www."))return document.eoform.custemail.focus(),alert("Please provide a valid email address by removing the 'www.' in front."),
!1;if(null!=document.eoform.custzip&&-1==document.eoform.custzip.value.search(/^\d{5}(-?\d{4})?$/))return document.eoform.custzip.focus(),alert("Please provide a valid zip code."),!1;if("undefined"!=typeof document.eoform.custphone){var a=document.eoform.custphone.value;if(0<=a.indexOf("-")||0<=a.indexOf(" ")||0<=a.indexOf("(")||0<=a.indexOf(")"))a=a.replace(/-/g,"").replace(/ /g,"").replace(/\(/g,"").replace(/\)/g,"");if(""==a)return document.eoform.custphone.focus(),alert("Please provide a telephone number."),
!1;if(-1==a.search(/^\d{10}$/))return document.eoform.custphone.focus(),alert("Please enter a full 10-digit telephone number, including the area code."),!1;document.eoform.custphone.value=a.substring(0,3)+"-"+a.substring(3,6)+"-"+a.substring(6,10);if(3<=a.length&&0==checkValidPhoneAreaCode(a.substring(0,3))||6<=a.length&&0==checkValidPhoneMiddleNumber(a.substring(3,6)))return document.eoform.custphone.focus(),!1}return"undefined"!=typeof document.eoform.eouserstatus&&""==document.eoform.eouserstatus.value?
(alert("Please select the way you plan to use our website."),!1):!0}function isValidE02Email(a){return null==a||""==a||-1==a.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)||0==a.indexOf("www.")?!1:!0}function isValidEO2Phone(a){return null==a||""==a||4<a.length&&!a.substring(1,4).match(/[2-9](?!(?=00|11|22|33|44|55|66|77|88))[0-8]\d/)||9<a.length&&a.substring(6,9).match(/555|[01]\d\d/)?!1:!0}
function isValidEO2Zip(a){return null==a||""==a||-1==a.search(/^\d{5}(-?\d{4})?$/)?!1:!0}function isValidEO2Fname(a){return null==a||""==a?!1:!0}function isValidEO2Lname(a){return null==a||""==a?!1:!0}function isValidEO2Address(a){return null==a||""==a?!1:!0}
function isValidEO2Form(){var a=!0;document.eoform.custemail&&!isValidE02Email(document.eoform.custemail.value)&&($(document.eoform.custemail).parent().find("span").removeClass("hidden"),a=!1);document.eoform.custphone&&!isValidEO2Phone(document.eoform.custphone.value)&&($(document.eoform.custphone).parent().find("span").removeClass("hidden"),a=!1);document.eoform.custzip&&!isValidEO2Zip(document.eoform.custzip.value)&&($(document.eoform.custzip).parent().find("span").removeClass("hidden"),a=!1);
document.eoform.custfname&&!isValidEO2Fname(document.eoform.custfname.value)&&($(document.eoform.custfname).parent().find("span").removeClass("hidden"),a=!1);document.eoform.custlname&&!isValidEO2Lname(document.eoform.custlname.value)&&($(document.eoform.custlname).parent().find("span").removeClass("hidden"),a=!1);document.eoform.custaddress&&!isValidEO2Address(document.eoform.custaddress.value)&&($(document.eoform.custaddress).parent().find("span").removeClass("hidden"),a=!1);document.eoform.custphone&&
a&&(document.eoform.custphone.value=document.eoform.custphone.value.replace(/(\(|\)|-|\s)/g,""));return a}function checkValidPhoneAreaCode(a){var b=!1;a.match(/[2-9](?!(?=00|11|22|33|44|55|66|77|88))[0-8]\d/)&&(b=!0);!0!==b&&alert("Please enter a valid area code.");return b}function checkValidPhoneMiddleNumber(a){var b=!0;a.match(/555|[01]\d\d/)&&(b=!1);!0!==b&&alert("Please enter a valid telephone number.");return b}
function validateLeadGenFormWelcome(){leadgensection="eoform";validateEOForm()&&postLeadgenEOP();return!1}function validateLeadGenFormSRP(){validateEOForm()&&postLeadgenEOP();return!1}
function postLeadgenEOP(){var a="custemail\x3d"+document.eoform.custemail.value+"\x26";void 0!=document.eoform.custzip&&""!=document.eoform.custzip.value&&(a+="custzip\x3d"+document.eoform.custzip.value+"\x26");void 0!=document.eoform.custphone&&""!=document.eoform.custphone.value&&(a+="custphone\x3d"+document.eoform.custphone.value+"\x26");$.post("/eopost.ajax",a).always(function(){runLeadGenAndUpdatePage()})}
function getQueryParameters(a){return(a||document.location.search).replace(/(^\?)/,"").split("\x26").map(function(a){return a=a.split("\x3d"),this[a[0]]=a[1],this}.bind({}))[0]}function mapShowLeadGen(){leadgensection="map";runLeadGenAndUpdatePage()}var hideStep1;
function checkSmartStep1(){hideStep1=!0;""==$("#custfname").val().trim()||""==$("#custlname").val().trim()||-1==$("#custemail").val().trim().search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)||0==$("#custemail").val().trim().indexOf("www.")||-1==$("#custzip").val().trim().search(/^\d{5}(-?\d{4})?$/)?hideStep1=!1:isDesktopView()&&(void 0!=document.register.phone1?-1==document.register.phone1.value.search(/^\d{3}$/)||-1==document.register.phone2.value.search(/^\d{3}$/)||
-1==document.register.phone3.value.search(/^\d{4}$/):-1==document.register.phone.value.replace(/\s/g,"").search(/^\(?\d{3}\)?-?\d{3}-?\d{4}$/))||isMobileView()&&-1==document.register.phone.value.replace(/\s/g,"").search(/^\(?\d{3}\)?-?\d{3}-?\d{4}$/)?hideStep1=!1:$("#addressDiv").is(":hidden")||void 0==document.register.custaddress||""!=document.register.custaddress.value||(hideStep1=!1);hideStep1&&(null!=document.getElementById("step1")?($("#hideStep1").val("true"),$("#step2-heading").removeClass("hidden-xs"),
goToRegPageStep2()):$("#custinfo").hide())}
function validateContactUsForm(){document.contact.fname.value=trimText(document.contact.fname.value);document.contact.lname.value=trimText(document.contact.lname.value);document.contact.email.value=trimText(document.contact.email.value);if(""==document.contact.fname.value)return document.contact.fname.focus(),alert("Please provide first name."),!1;if(""==document.contact.lname.value)return document.contact.lname.focus(),alert("Please provide last name."),!1;if(-1==document.contact.email.value.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/))return document.contact.email.focus(),
alert("Please provide a valid email address."),!1;if(0==document.contact.email.value.indexOf("www."))return document.contact.email.focus(),alert("Please provide a valid email address by removing the 'www.' in front."),!1;if(-1==document.contact.phone.value.replace(/\s/g,"").search(/^\(?\d{3}\)?-?\d{3}-?\d{4}$/))return document.contact.phone.focus(),alert("Please provide a valid phone number."),!1;if(""==document.contact.message.value)return document.contact.message.focus(),alert("Message is required."),
!1}function validateCcpaForm(){if(-1==document.ccpa.email.value.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/))return document.ccpa.email.focus(),alert("Please provide a valid email address."),!1;if(-1==document.ccpa.custzip.value.search(/^\d{5}(-?\d{4})?$/))return document.ccpa.custzip.focus(),alert("Please provide a valid zip code."),!1;if(!isValidGoogleCaptcha())return!1}var contactFormHidden=contactFormHidden||!0;
function toggleContactForm(){contactFormHidden?($("html, body").animate({scrollTop:$("#contact-form-div").offset().top},1E3),contactFormHidden=!1):contactFormHidden=!0}
function expandCheckbox(a){var b=$(a),c=!0,d=$(b).parents(".ldm-checkbox-container").find(".ldm-checkbox-expanded");0==d.length&&(d=$(b).parents("#reg-checkbox").find(".checkbox-expanded"));1<d.length&&(a=$(b).attr("name"),d=$(b).parents("#reg-checkbox").find(".checkbox-expanded."+a));0==d.length&&(d=$(b).parents(".form-group").find(".disclosure-text"),a=$(".form-fb"),0==a.length&&(c=!1));d&&(!0===$(b).prop("checked")?d.fadeIn(function(){!1===$(b).prop("checked")&&d.hide();!0===c&&$("html, body").animate({scrollTop:$(":button").offset().top},
2E3)}):d.hide())}function trackCustomerTag(a,b){$.get("/add-customer-tag.ajax?cid\x3d"+a+"\x26tag\x3d"+b);"Upsell_CP_Click"==b&&ROAS.pixelForConfirmationCreditClick()}function isExtendedValidation(){return"true"==$("#extendedValidation").val()}function allAlphabets(a){return a.match(/^[A-Za-z]+$/)}function isHoneypotValid(){if(!(0<$("#honey-check").length))return!0;var a=$("#honey-input");if(0<a.length&&0==a.val().length)return!0;alert("Please verify your information");return!1}
function isValidGoogleCaptcha(){if(0<$("#google-human-test").length){if("undefined"!==typeof googleCallbackValidated&&googleCallbackValidated)return!0;alert("Please complete the Captcha");return!1}return!0}
function validateUnsubscribeForm(){document.unsubscribe.unsubemail.value=trimText(document.unsubscribe.unsubemail.value);document.unsubscribe.unsubphone.value=trimText(document.unsubscribe.unsubphone.value);return-1==document.unsubscribe.unsubemail.value.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)&&-1==document.unsubscribe.unsubphone.value.replace(/-/g,"").replace(/ /g,"").replace(/\(/g,"").replace(/\)/g,"").search(/^\d{10}$/)?(alert("Please provide an email address or phone number."),
!1):!0};function isWindow(a){return null!=a&&a===a.window};jQuery.cookie=function(e,b,a){if(1<arguments.length&&"[object Object]"!==String(b)){a=jQuery.extend({},a);if(null===b||void 0===b)a.expires=-1;if("number"===typeof a.expires){var d=a.expires,c=a.expires=new Date;c.setDate(c.getDate()+d)}b=String(b);return document.cookie=[encodeURIComponent(e),"\x3d",a.raw?b:encodeURIComponent(b),a.expires?"; expires\x3d"+a.expires.toUTCString():"",a.path?"; path\x3d"+a.path:"",a.domain?"; domain\x3d"+a.domain:"",a.secure?"; secure":""].join("")}a=b||{};c=a.raw?function(a){return a}:
decodeURIComponent;return(d=(new RegExp("(?:^|; )"+encodeURIComponent(e)+"\x3d([^;]*)")).exec(document.cookie))?c(d[1]):null};(function(k,g){"function"===typeof define&&define.amd?define(["jQuery"],g):"object"===typeof exports?g(require("jQuery")):g(k.jQuery)})(this,function(k){var g=function(){var a={},c=/{{([^}]+)}}/g;a.parse=function(b){for(var a={inpts:{},chars:{}},l=[],h;h=c.exec(b);)l.push(h);h=b.length;var f=0,n=0,d=0;for(d;d<h;d++)if(f<l.length&&d===l[f].index){for(var m=l[f][1],q=m.length,g=0;g<q;g++)a.inpts[n]=m.charAt(g),n++;f++;d+=m.length+4-1}else a.chars[d-4*f]=b.charAt(d);a.mLength=d-4*f;return a};return a}();
k=function(){var a={},c=/iphone/i.test("undefined"!==typeof navigator?navigator.userAgent:null);a.extend=function(b){for(var a=1;a<arguments.length;a++)for(var c in arguments[a])b[c]=arguments[a][c];return b};a.addChars=function(b,a,c){return b.substr(0,c)+a+b.substr(c,b.length)};a.removeChars=function(b,a,c){return b.substr(0,a)+b.substr(c,b.length)};a.isBetween=function(b,a){a.sort(function(b,a){return b-a});return b>a[0]&&b<a[1]};a.addListener=function(b,a,c){return"undefined"!==typeof b.addEventListener?
b.addEventListener(a,c,!1):b.attachEvent("on"+a,c)};a.preventDefault=function(b){return b.preventDefault?b.preventDefault():b.returnValue=!1};a.getClip=function(b){if(b.clipboardData)return b.clipboardData.getData("Text");if(window.clipboardData)return window.clipboardData.getData("Text")};a.isDelKey=function(b){return 8===b||46===b||c&&127===b};a.isSpecialKey=function(b){return{9:"tab",13:"enter",35:"end",36:"home",37:"leftarrow",38:"uparrow",39:"rightarrow",40:"downarrow",116:"F5"}[b]};a.isModifier=
function(b){return b.ctrlKey||b.altKey||b.metaKey};a.forEach=function(b,a,c){if(b.hasOwnProperty("length"))for(var e=0,f=b.length;e<f&&!1!==a.call(c,b[e],e,b);e++);else for(e in b)if(b.hasOwnProperty(e)&&!1===a.call(c,b[e],e,b))break};return a}();var g=function(a,c){return function(b){var e=[],g=[];c.forEach(b,function(b){c.forEach(b,function(f,b){f=a.parse(f);b="*"===b?/.*/:new RegExp(b);e.push(b);g.push(f);return!1})});return{getPattern:function(b){var f;c.forEach(e,function(a,d){if(a.test(b))return f=
d,!1});return void 0===f?null:g[f]},patterns:g,matchers:e}}}(g,k),r=function(){return{get:function(a){if("number"===typeof a.selectionStart)return{begin:a.selectionStart,end:a.selectionEnd};var c=document.selection.createRange();if(c&&c.parentElement()===a){var b=a.createTextRange(),e=a.createTextRange();a=a.value.length;b.moveToBookmark(c.getBookmark());e.collapse(!1);return-1<b.compareEndPoints("StartToEnd",e)?{begin:a,end:a}:{begin:-b.moveStart("character",-a),end:-b.moveEnd("character",-a)}}return{begin:0,
end:0}},set:function(a,c){"object"!==typeof c&&(c={begin:c,end:c});a.setSelectionRange?(a.focus(),a.setSelectionRange(c.begin,c.end)):a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveEnd("character",c.end),a.moveStart("character",c.begin),a.select())}}}(),p=function(a,c,b){function e(f,c){var d=this;d.el=f;if(!d.el)throw new TypeError("Must provide an existing element");d.opts=b.extend({},g,c);"undefined"!==typeof d.opts.pattern&&(d.opts.patterns=d._specFromSinglePattern(d.opts.pattern),
delete d.opts.pattern);if("undefined"===typeof d.opts.patterns)throw new TypeError("Must provide a pattern or array of patterns");d.patternMatcher=a(d.opts.patterns);d._updatePattern();d.hldrs={};d.focus=0;b.addListener(d.el,"keydown",function(b){d._keyDown(b)});b.addListener(d.el,"keypress",function(b){d._keyPress(b)});b.addListener(d.el,"paste",function(b){d._paste(b)});d.opts.persistent&&(d._processKey("",!1),d.el.blur(),b.addListener(d.el,"focus",function(b){d._focus(b)}),b.addListener(d.el,"click",
function(b){d._focus(b)}),b.addListener(d.el,"touchstart",function(b){d._focus(b)}))}var g={persistent:!1,repeat:!1,placeholder:" "},h={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/};e.addInptType=function(b,a){h[b]=a};e.prototype.resetPattern=function(b){this.opts.patterns=b?this._specFromSinglePattern(b):this.opts.patterns;this.sel=c.get(this.el);this.val=this.el.value;this.delta=0;this._removeChars();this.patternMatcher=a(this.opts.patterns);b=this.patternMatcher.getPattern(this.val);this.mLength=b.mLength;
this.chars=b.chars;this.inpts=b.inpts;this._processKey("",!1,!0)};e.prototype._updatePattern=function(){var b=this.patternMatcher.getPattern(this.val);b&&(this.mLength=b.mLength,this.chars=b.chars,this.inpts=b.inpts)};e.prototype._keyDown=function(a){var f=a.which||a.keyCode;if(f&&b.isDelKey(f))return this._processKey(null,f),b.preventDefault(a)};e.prototype._keyPress=function(a){var f,d;a.which?f=a.which:(f=a.keyCode,d=b.isSpecialKey(f));if(!b.isDelKey(f)&&!d&&!b.isModifier(a))return this._processKey(String.fromCharCode(f),
!1),b.preventDefault(a)};e.prototype._paste=function(a){this._processKey(b.getClip(a),!1);return b.preventDefault(a)};e.prototype._focus=function(){var b=this;setTimeout(function(){var a=c.get(b.el),f=0===a.end;(a.end>b.focus||f)&&c.set(b.el,b.focus)},0)};e.prototype._processKey=function(a,e,d){this.sel=c.get(this.el);this.val=this.el.value;this.delta=0;if(this.sel.begin!==this.sel.end)this.delta=-1*Math.abs(this.sel.begin-this.sel.end),this.val=b.removeChars(this.val,this.sel.begin,this.sel.end);
else if(e&&46===e)this._delete();else if(e&&0<=this.sel.begin-1){for(--this.delta;this.chars[this.focus-1];)this.delta--,this.focus--;this.val=b.removeChars(this.val,this.sel.end+this.delta,this.sel.end)}else if(e)return!0;e||(this.val=b.addChars(this.val,a,this.sel.begin),this.delta+=a.length);this._formatValue(d)};e.prototype._delete=function(){for(;this.chars[this.sel.begin];)this._nextPos();this.sel.begin<this.val.length&&(this._nextPos(),this.val=b.removeChars(this.val,this.sel.end-1,this.sel.end),
this.delta=-1)};e.prototype._nextPos=function(){this.sel.end++;this.sel.begin++};e.prototype._formatValue=function(b){this.newPos=this.sel.end+this.delta;this._removeChars();this._updatePattern();this._validateInpts();this._addChars();this.el.value=this.val.substr(0,this.mLength);"undefined"!==typeof b&&!1!==b||c.set(this.el,this.newPos)};e.prototype._removeChars=function(){this.sel.end>this.focus&&(this.delta+=this.sel.end-this.focus);for(var a=0,c=0;c<=this.mLength;c++){var d=this.chars[c],e=this.hldrs[c],
g=c+a,h,g=c>=this.sel.begin?g+this.delta:g;h=this.val.charAt(g);if(d&&d===h||e&&e===h)this.val=b.removeChars(this.val,g,g+1),a--}this.hldrs={};this.focus=this.val.length};e.prototype._validateInpts=function(){for(var a=0;a<this.val.length;a++){var c=this.inpts[a],d=!h[c],c=!d&&!h[c].test(this.val.charAt(a)),e=this.inpts[a];(d||c)&&e&&(this.val=b.removeChars(this.val,a,a+1),this.focusStart--,this.newPos--,this.delta--,a--)}};e.prototype._addChars=function(){if(this.opts.persistent){for(var a=0;a<=
this.mLength;a++)this.val.charAt(a)||(this.val=b.addChars(this.val,this.opts.placeholder,a),this.hldrs[a]=this.opts.placeholder),this._addChar(a);for(;this.chars[this.focus];)this.focus++}else for(a=0;a<=this.val.length;a++){if(0>=this.delta&&a===this.focus&&void 0===this.chars[a]||0===this.focus)return!0;this._addChar(a)}};e.prototype._addChar=function(a){var c=this.chars[a];if(!c)return!0;b.isBetween(a,[this.sel.begin-1,this.newPos+1])&&(this.newPos++,this.delta++);a<=this.focus&&this.focus++;this.hldrs[a]&&
(delete this.hldrs[a],this.hldrs[a+1]=this.opts.placeholder);this.val=b.addChars(this.val,c,a)};e.prototype._specFromSinglePattern=function(a){return[{"*":a}]};return e}(g,r,k);$.fn.formatter=function(a){"object"==typeof a&&this.each(function(){$.data(this,"plugin_formatter")||$.data(this,"plugin_formatter",new p(this,a))});this.resetPattern=function(a){this.each(function(){var b=$.data(this,"plugin_formatter");b&&b.resetPattern(a)});return this};return this};$.fn.formatter.addInptType=function(a,
c){p.addInptType(a,c)}});(function(b,r,u){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?module.exports=b(require("jquery")):b(r||u)})(function(b){var r=function(a,d,e){var c={invalid:[],getCaret:function(){try{var h,t=0,f=a.get(0),b=document.selection,d=f.selectionStart;if(b&&-1===navigator.appVersion.indexOf("MSIE 10"))h=b.createRange(),h.moveStart("character",-c.val().length),t=h.text.length;else if(d||"0"===d)t=d;return t}catch(n){}},setCaret:function(h){try{if(a.is(":focus")){var c,
f=a.get(0);f.setSelectionRange?f.setSelectionRange(h,h):(c=f.createTextRange(),c.collapse(!0),c.moveEnd("character",h),c.moveStart("character",h),c.select())}}catch(C){}},events:function(){a.on("keydown.mask",function(h){a.data("mask-keycode",h.keyCode||h.which);a.data("mask-previus-value",a.val());a.data("mask-previus-caret-pos",c.getCaret());c.maskDigitPosMapOld=c.maskDigitPosMap}).on(b.jMaskGlobals.useInput?"input.mask":"keyup.mask",c.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){a.keydown().keyup()},
100)}).on("change.mask",function(){a.data("changed",!0)}).on("blur.mask",function(){m===c.val()||a.data("changed")||a.trigger("change");a.data("changed",!1)}).on("blur.mask",function(){m=c.val()}).on("focus.mask",function(a){!0===e.selectOnFocus&&b(a.target).select()}).on("focusout.mask",function(){e.clearIfNotMatch&&!q.test(c.val())&&c.val("")})},getRegexMask:function(){for(var a=[],c,f,b,e,n=0;n<d.length;n++)(c=g.translation[d.charAt(n)])?(f=c.pattern.toString().replace(/.{1}$|^.{1}/g,""),b=c.optional,
(c=c.recursive)?(a.push(d.charAt(n)),e={digit:d.charAt(n),pattern:f}):a.push(b||c?f+"?":f)):a.push(d.charAt(n).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26"));a=a.join("");e&&(a=a.replace(new RegExp("("+e.digit+"(.*"+e.digit+")?)"),"($1)?").replace(new RegExp(e.digit,"g"),e.pattern));return new RegExp(a)},destroyEvents:function(){a.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(c){var b=a.is("input")?"val":"text";if(0<arguments.length){if(a[b]()!==c)a[b](c);
b=a}else b=a[b]();return b},calculateCaretPosition:function(){var b=a.data("mask-previus-value")||"",d=c.getMasked(),f=c.getCaret();if(b!==d){var e=a.data("mask-previus-caret-pos")||0,d=d.length,g=b.length,n=b=0,p=0,z=0,k;for(k=f;k<d&&c.maskDigitPosMap[k];k++)n++;for(k=f-1;0<=k&&c.maskDigitPosMap[k];k--)b++;for(k=f-1;0<=k;k--)c.maskDigitPosMap[k]&&p++;for(k=e-1;0<=k;k--)c.maskDigitPosMapOld[k]&&z++;f>g?f=10*d:e>=f&&e!==g?c.maskDigitPosMapOld[f]||(e=f,f=f-(z-p)-b,c.maskDigitPosMap[f]&&(f=e)):f>e&&
(f=f+(p-z)+n)}return f},behaviour:function(d){d=d||window.event;c.invalid=[];var e=a.data("mask-keycode");if(-1===b.inArray(e,g.byPassKeys)){var e=c.getMasked(),f=c.getCaret();setTimeout(function(){c.setCaret(c.calculateCaretPosition())},10);c.val(e);c.setCaret(f);return c.callbacks(d)}},getMasked:function(a,b){var f=[],h=void 0===b?c.val():b+"",l=0,n=d.length,p=0,t=h.length,k=1,q="push",m=-1,r=0;b=[];var w,u;e.reverse?(q="unshift",k=-1,w=0,l=n-1,p=t-1,u=function(){return-1<l&&-1<p}):(w=n-1,u=function(){return l<
n&&p<t});for(var A;u();){var y=d.charAt(l),x=h.charAt(p),v=g.translation[y];if(v)x.match(v.pattern)?(f[q](x),v.recursive&&(-1===m?m=l:l===w&&l!==m&&(l=m-k),w===m&&(l-=k)),l+=k):x===A?(r--,A=void 0):v.optional?(l+=k,p-=k):v.fallback?(f[q](v.fallback),l+=k,p-=k):c.invalid.push({p:p,v:x,e:v.pattern}),p+=k;else{if(!a)f[q](y);x===y?(b.push(p),p+=k):(A=y,b.push(p+r),r++);l+=k}}a=d.charAt(w);n!==t+1||g.translation[a]||f.push(a);f=f.join("");c.mapMaskdigitPositions(f,b,t);return f},mapMaskdigitPositions:function(a,
b,d){a=e.reverse?a.length-d:0;c.maskDigitPosMap={};for(d=0;d<b.length;d++)c.maskDigitPosMap[b[d]+a]=1},callbacks:function(b){var h=c.val(),f=h!==m,g=[h,b,a,e],l=function(a,b,c){"function"===typeof e[a]&&b&&e[a].apply(this,c)};l("onChange",!0===f,g);l("onKeyPress",!0===f,g);l("onComplete",h.length===d.length,g);l("onInvalid",0<c.invalid.length,[h,b,a,c.invalid,e])}};a=b(a);var g=this,m=c.val(),q;d="function"===typeof d?d(c.val(),void 0,a,e):d;g.mask=d;g.options=e;g.remove=function(){var b=c.getCaret();
c.destroyEvents();c.val(g.getCleanVal());c.setCaret(b);return a};g.getCleanVal=function(){return c.getMasked(!0)};g.getMaskedVal=function(a){return c.getMasked(!1,a)};g.init=function(h){h=h||!1;e=e||{};g.clearIfNotMatch=b.jMaskGlobals.clearIfNotMatch;g.byPassKeys=b.jMaskGlobals.byPassKeys;g.translation=b.extend({},b.jMaskGlobals.translation,e.translation);g=b.extend(!0,{},g,e);q=c.getRegexMask();if(h)c.events(),c.val(c.getMasked());else{e.placeholder&&a.attr("placeholder",e.placeholder);a.data("mask")&&
a.attr("autocomplete","off");h=0;for(var m=!0;h<d.length;h++){var f=g.translation[d.charAt(h)];if(f&&f.recursive){m=!1;break}}m&&a.attr("maxlength",d.length);c.destroyEvents();c.events();h=c.getCaret();c.val(c.getMasked());c.setCaret(h)}};g.init(!a.is("input"))};b.maskWatchers={};var u=function(){var a=b(this),d={},e=a.attr("data-mask");a.attr("data-mask-reverse")&&(d.reverse=!0);a.attr("data-mask-clearifnotmatch")&&(d.clearIfNotMatch=!0);"true"===a.attr("data-mask-selectonfocus")&&(d.selectOnFocus=
!0);if(B(a,e,d))return a.data("mask",new r(this,e,d))},B=function(a,d,e){e=e||{};var c=b(a).data("mask"),g=JSON.stringify;a=b(a).val()||b(a).text();try{return"function"===typeof d&&(d=d(a)),"object"!==typeof c||g(c.options)!==g(e)||c.mask!==d}catch(m){}},q=function(a){var b=document.createElement("div"),e;a="on"+a;e=a in b;e||(b.setAttribute(a,"return;"),e="function"===typeof b[a]);return e};b.fn.mask=function(a,d){d=d||{};var e=this.selector,c=b.jMaskGlobals,g=c.watchInterval,c=d.watchInputs||c.watchInputs,
m=function(){if(B(this,a,d))return b(this).data("mask",new r(this,a,d))};b(this).each(m);e&&""!==e&&c&&(clearInterval(b.maskWatchers[e]),b.maskWatchers[e]=setInterval(function(){b(document).find(e).each(m)},g));return this};b.fn.masked=function(a){return this.data("mask").getMaskedVal(a)};b.fn.unmask=function(){clearInterval(b.maskWatchers[this.selector]);delete b.maskWatchers[this.selector];return this.each(function(){var a=b(this).data("mask");a&&a.remove().removeData("mask")})};b.fn.cleanVal=function(){return this.data("mask").getCleanVal()};
b.applyDataMask=function(a){a=a||b.jMaskGlobals.maskElements;(a instanceof b?a:b(a)).filter(b.jMaskGlobals.dataMaskAttr).each(u)};q={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&q("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},
S:{pattern:/[a-zA-Z]/}}};b.jMaskGlobals=b.jMaskGlobals||{};q=b.jMaskGlobals=b.extend(!0,{},q,b.jMaskGlobals);q.dataMask&&b.applyDataMask();setInterval(function(){b.jMaskGlobals.watchDataMask&&b.applyDataMask()},q.watchInterval)},window.jQuery,window.Zepto);