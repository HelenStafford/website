!function(v){var c={},e=".supermoney.com",a="https://api",t="https://app";"undefined"!=typeof sm_env&&("local"==sm_env?(a="//localapi",e+=":8000",t="//localapp"):"development"==sm_env&&(a="https://devapi",e+=":8000",t="https://devapp"));var x={api:a+e+"/",app:t+".supermoney.com/",landing:!0,enableLeadTracking:!1},n=4e3,i=n,r=!1,g={},s=function(e){!function(a){var e=[];for(var t in c)"failure"===c[t]&&e.unshift(JSON.parse(t));0<e.length?v.supermoney.saveMetric(e,function(e){e.success?i=n:i<15e3&&(i+=n),a&&a()},function(e){i<15e3&&(i+=n),a&&a()}):(i=n,a&&a())}(u)},u=function(){setTimeout(s,i)};u();var d,l=function(t,n,i,e){var a=v.extend({data:t},g),r=function(e){if(Array.isArray(t))for(var a in t)c[JSON.stringify(t[a])]="failure";else c[JSON.stringify(t)]="failure";i&&i(e)};for(var s in e&&v.extend(a,e),d&&v.extend(a,{leadTrackingId:d}),t)c[JSON.stringify(t[s])]="pending";var u=v.ajax({type:"POST",url:x.api+"metric",data:a,xhrFields:{withCredentials:!0},success:null,timeout:6e4});return u.done(function(e){if(e.success){for(var a in t)delete c[JSON.stringify(t[a])];n&&n(e)}else r(e)}),u.fail(r),u},o=function(){if(x.landing){var e=function(){var e=[],a=window.location.search;if(a){var t=(a=a.substring(1)).split("&");for(var n in t){var i=t[n].split("=");e.push({dataSourceName:i[0],value:decodeURIComponent(i[1])})}}return e.length&&(e.push({dataSourceName:"landingReferer",value:document.referrer}),e.push({dataSourceName:"landingUrl",value:window.location.href.replace(window.location.search,"")})),e}();e.length&&l(e)}},f=function(e,a,t,n,i,r,s){for(var u in c)t.push(JSON.parse(u));var l=v.extend({type:e,namespace:a,metrics:t,leadTrackingId:d,ctaSource:n},g,i),o=v.ajax({type:"POST",url:x.api+"newLead",data:l,xhrFields:{withCredentials:!0},success:null,timeout:18e4});return r&&o.done(r),s&&o.fail(s),o},p=function(a,t){v.ajax({type:"POST",url:x.api+"lead",data:g,xhrFields:{withCredentials:!0},success:null,timeout:3e4}).done(function(e){e.success&&e.data.id?a&&a(e):t&&t(e)}).fail(t)},m=function(a,t){var e=v.extend({vertical:x.vertical,namespace:x.namespace,partner:x.partner,partnerChannel:x.partnerChannel},g);v.ajax({type:"POST",url:x.api+"lead/startLead",xhrFields:{withCredentials:!0},data:e,success:null,timeout:3e4,cache:!1}).done(function(e){e.success&&e.data.leadTrackingId?(d=e.data.leadTrackingId,o(),a&&a(e)):t&&t(e)}).fail(t)},h=function(){var e=null;try{document.cookie="smtest=success; path=/";var a=document.cookie.split(";");for(var t in a){var n=a[t].trim();0===n.indexOf("smtest")&&(e=n.substring(7,n.length))}var i=new Date;i.setTime(i.getTime()-2592e6),document.cookie="smtest= ; expires="+i.toUTCString()+"; path=/"}catch(e){}finally{return!!e}}(),y=-1,w=-1,T=0,C=function(){v('a[href*="supermoney.com/tracking"], a[href*="track.supermoney.com"], a[href*="super.go2cloud.org"]').length&&v.supermoney.getTxId(function(a){if(a.success&&a.data&&a.data.id){v('a[href*="supermoney.com/tracking"], a[href*="track.supermoney.com"], a[href*="super.go2cloud.org"]').click(function(){var e={dataSourceName:"supermoney.click",value:{sourceId:v(this).attr("id"),sourceUri:window.location.href.replace(window.location.search,""),destinationUri:v(this).attr("href")}};v.supermoney.saveMetric(e)});var t=v("body").data("page-type");v('a[href*="supermoney.com/tracking"], a[href*="track.supermoney.com"], a[href*="super.go2cloud.org"]').each(function(){var e=v(this).attr("href");e&&(e+=(e.match(/\?/)?"&":"?")+"aff_sub5="+a.data.id+"&source="+t,v(this).attr("href",e)),v(this).attr("rel","nofollow")})}},function(){v('a[href*="supermoney.com/tracking"], a[href*="track.supermoney.com"], a[href*="super.go2cloud.org"]').attr("rel","nofollow")})},k=function(e){void 0===e&&(e=window.location.search),"?"==e.substring(0,1)&&(e=e.substr(1));var a={},t=(e=(e=e.replace(/&amp;/g,"&")).replace(/&#038;/g,"&")).split("&");for(var n in t){var i=t[n].split("=");2===i.length&&i[1]&&i[1]!=="{"+i[0]+"}"&&(a[i[0]]=i[1])}return a},S=function(e,a){var t=(e=e.replace(/http[s]?:\/\/track.supermoney.com\/aff_c/,"https://www.supermoney.com/tracking/track.php").replace(/https:\/\//,"https://")).split("?"),n=t[0],i={};if(1<t.length){var r=t[1];i=k(r)}var s=v.extend(i,a),u="";for(var l in s)s.hasOwnProperty(l)&&s[l]&&(u=u+"&"+l+"="+s[l]);return n+"?"+(u=u.substr(1))},F=function(e,a){if(new RegExp(/^\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/i).test(e))return e.includes("supermoney.com")||"/"==e.substr(0,1)?S(e,a):e;var t=v(e),n=t.attr("href");if(n.includes("supermoney.com")||"/"==n.substr(0,1)){var i=S(n,a);return t.attr("href",i)[0].outerHTML}return e},j=function(e,a,t){if(e.length||Object.keys(e).length)if(h){var n=v.extend({locations:e},g);v.ajax({type:"POST",url:x.api+"cta",xhrFields:{withCredentials:!0},data:n,success:null,timeout:3e4}).done(function(e){e&&e.data?a&&a(e):t&&t(e)}).fail(t)}else!function(e,a,t){var n=function(e){var a={aid:"aff_id",aff_id:"aff_id",aff_sub:"aff_sub",aff_sub2:"aff_sub2",aff_sub3:"aff_sub3",aff_sub5:"aff_sub5",aff_click_id:"aff_click_id",PPCPN:"PPCPN",utm_medium:"utm_medium",utm_campaign:"utm_campaign",utm_term:"utm_term",utm_source:"utm_source",network:"network",sitetarget:"sitetarget"},t={};for(var n in a)a.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[a[n]]=e[n]);return t}(k()),i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=F(e[r],n));a({data:i})}(e,a);else a({success:1,data:[]})};void 0===v.supermoney&&v.extend({supermoney:{}}),v.extend(v.supermoney,{set:function(e){v.extend(x,e)},init:function(e){v.extend(x,e);var a=document.referrer,t=null;a&&(t={landingReferer:a});var n=v.extend({},g,t);v.ajax({type:"POST",url:x.api,data:n,xhrFields:{withCredentials:!0},success:null,timeout:3e4}).then(function(a){r=!0,x.enableLeadTracking?m(function(e){v(document).trigger("sm_api:initialized"),y=a.data.smSessionId,w=a.data.transactionId},function(e){o()}):(v(document).trigger("sm_api:initialized"),y=a.data.smSessionId,w=a.data.transactionId,o())},function(e,a){v(document).trigger("sm_api:init_error"),l([{dataSourceName:"sessionCreateError",value:a}],null,null)})},saveInputMetrics:function(e,a,t){var r=[];v(e).each(function(e){switch(this.tagName){case"SELECT":r.push((n=v(this),(i={}).dataSourceName=n.data("source-name"),i.value=n.find("option:selected").data("value"),i.value||(i.value=n.val()),i));break;default:r.push((a=v(this),(t={}).dataSourceName=a.data("source-name"),t.value=a.data("value"),t.value||(t.value=a.val()),t))}var a,t,n,i}),r.length&&l(r,a,t)},initTrk:j,getTxId:p,startLead:m,getSmSessionId:function(){return y},getFormTransactionId:function(){return w},getLeadTrackingId:function(){return d},getPendingMetricsQueue:function(){return c},completeTx:function(e,a,t){var n,i=new RegExp("[?&]aff_sub5(=([^&#]*)|&|#|$)").exec(window.location.href);i&&i[2]&&(n=decodeURIComponent(i[2].replace(/\+/g," ")));var r=v.extend({vertical:e,transactionId:n},g);if(n)v.ajax({type:"POST",url:x.api+"lead/setTransactionId",xhrFields:{withCredentials:!0},data:r,success:null,timeout:6e4}).done(function(e){a&&a(e)}).fail(function(){t&&t()})},saveMetric:l,saveClickMetric:function(e,a,t){var n=v.extend({data:e},g),i=v.ajax({type:"POST",url:x.api+"metric/click",data:n,xhrFields:{withCredentials:!0},success:null,timeout:6e4});return i.done(function(e){e.success?a&&a(e):t&&t(e)}).fail(function(e){t&&t(i)}),i},settings:function(e){v.extend(x,e)},submitLead:function(e,a,t,n,i){f(e,a,null,t,n,i)},getActiveLeads:function(e,a,t){var n=v.extend({},g,e),i=v.ajax({type:"GET",url:x.api+"lead/getActiveLeads",data:n,xhrFields:{withCredentials:!0},success:null,timeout:3e4});return a&&i.done(a),t&&i.fail(t),i},submitLeadWithMetrics:f,geo:function(e,a){var t=v.ajax({type:"GET",url:x.api+"geo",data:g,xhrFields:{withCredentials:!0},timeout:5e3});return e&&t.done(e),a&&t.fail(a),t},state:function(e,a){var t=v.ajax({type:"GET",url:x.api+"state",data:g,xhrFields:{withCredentials:!0},timeout:5e3});e&&t.done(e),a&&t.fail(a)},getLoanOffers:function(e,a,t){var n=v.extend({},g,e),i=v.ajax({type:"GET",url:x.api+"lead/getOffers",data:n,xhrFields:{withCredentials:!0},success:null,timeout:3e4});return a&&i.done(a),t&&i.fail(t),i},getFeatureOptions:function(e,a,t){var n=v.ajax({type:"GET",url:x.api+"business/feature/"+e+"/option",data:g,xhrFields:{withCredentials:!0},success:null,timeout:6e4});return a&&n.done(a),t&&n.fail(t),n},getFeatureRange:function(e,a,t,n){var i=v.ajax({type:"GET",url:x.api+"business/"+e+"/range/"+a,data:g,xhrFields:{withCredentials:!0},success:null,timeout:6e4});return t&&i.done(t),n&&i.fail(n),i},getBusinessFeatureRange:function(e,a,t,n,i){var r=v.ajax({type:"GET",url:x.api+"business/"+e+"/"+a+"/feature/"+t,data:g,xhrFields:{withCredentials:!0},success:null,timeout:6e4});return n&&r.done(n),i&&r.fail(i),r},getRecommendedBusinesses:function(e,a,t){var n=x.api+"business/"+e.vertical+"/recommended/"+e.txId;e.ltxId&&(n+="/"+e.ltxId);var i=v.ajax({type:"GET",url:n,data:g,xhrFields:{withCredentials:!0},success:null,timeout:6e4});return a&&i.done(a),t&&i.fail(t),i},getQualifiedBusinesses:function(e,a,t){var n=x.api+"business/"+e.vertical+"/qualified/"+e.txId,i=v.extend({},g,e);i.ltxId&&(n+="/"+i.ltxId);var r=v.ajax({type:"GET",url:n,data:i,xhrFields:{withCredentials:!0},success:null,timeout:6e4});return a&&r.done(a),t&&r.fail(t),r},getApplicationSummary:function(e,a,t,n,i){var r=v.extend({smSessionId:e,namespace:t,leadTrackingId:a},g),s=v.ajax({type:"GET",url:x.api+"lead/getSummary",data:r,xhrFields:{withCredentials:!0},success:null,timeout:3e4});n&&s.done(n),i&&s.fail(i)},checkExisting:function(e,a,t){var n=v.extend({vertical:e},g),i=v.ajax({type:"POST",url:x.api+"lead/exists",data:n,xhrFields:{withCredentials:!0},success:null,timeout:6e4});a&&i.done(a),t&&i.fail(t)},checkReviewsUserEmail:function(e,a,t,n){var i=v.extend({smSessionId:e,leadTrackingId:a},g),r=v.ajax({type:"POST",url:x.api+"lead/user/email",data:i,xhrFields:{withCredentials:!0},success:null,timeout:6e4});t&&r.done(t),n&&r.fail(n)},sessionToReviewsUser:function(e,a,t,n){var i=v.extend({smSessionId:e,leadTrackingId:a},g),r=v.ajax({type:"POST",url:x.api+"lead/user",data:i,xhrFields:{withCredentials:!0},success:null,timeout:6e4});t&&r.done(t),n&&r.fail(n)},initCtaLinks:function(r,s,e){r||(r='a[href*="supermoney.com/tracking"]:not(.modal-cta), a[href*="track.supermoney.com"]:not(.modal-cta), a[href*="super.go2cloud.org"]:not(.modal-cta)'),s||(s=v("body").data("page-type"));var u=v(r);if(u.length){u.addClass("sm-cta").each(function(){var e=v(this);e.data("sm-location")||e.data("sm-location","cta-"+T),T++});for(var a={},t=0;t<u.length;t++){var n=v(u[t]);n.data("sm-location")&&(a[n.data("sm-location")]=u[t].outerHTML)}Object.keys(a).length?j(a,function(e){for(var a=0;a<u.length;a++){var t=v(u[a]),n=t.data("sm-location");if(n&&e.data[n]){var i=v(e.data[n]);t.hasClass("hide")?i.addClass("hide"):i.hasClass("hide")&&i.removeClass("hide"),t.replaceWith(i)}}v(r).each(function(){var e=v(this).attr("href"),a=e.split("?"),t=!0,n=!0;t=2!==a.length?n=!1:new URLSearchParams(a[1]).get("source"),s?t?v(this).attr("href",e.replace("?source="+t,"?source="+s).replace("&source="+t,"&source="+s)):v(this).attr("href",v(this).attr("href")+(n?"&":"?")+"source="+s):t||v(this).attr("href",v(this).attr("href")+(n?"&":"?")+"source=unknown")}),v('a[href*="supermoney.com/tracking"], a[href*="track.supermoney.com"], a[href*="super.go2cloud.org"]').attr("rel","nofollow")},function(){C(e)}):C(e)}},getVehicleInfo:function(e,a,t,n){var i=v.extend({},g,a),r=v.ajax({type:"GET",url:x.api+"auto/"+e,data:i,xhrFields:{withCredentials:!0},timeout:3e4});t&&r.done(t),n&&r.fail(n)},updateLeadVertical:function(e,a,t){x.vertical=e;var n=v.extend({vertical:x.vertical},g);v.ajax({type:"POST",url:x.api+"lead/updateLead/"+d,xhrFields:{withCredentials:!0},data:n,success:null,timeout:3e4,cache:!1}).done(function(e){e.success?a&&a(e):t&&t(e)}).fail(t)},filterBusinesses:function(e,a,t){var n=x.api+"business/"+e.vertical+"/recommended",i=v.extend({businesses:e.businesses,getProfiles:e.getProfiles,limit:e.limit},g),r=v.ajax({type:"POST",url:n,xhrFields:{withCredentials:!0},data:i,success:null,timeout:3e4});return a&&r.done(a),t&&r.fail(t),r},ownsApp:function(e,a,t){var n=v.extend({},g,e),i=v.ajax({type:"GET",url:x.api+"lead/owns",data:n,xhrFields:{withCredentials:!0},success:null,timeout:3e4});return a&&i.done(a),t&&i.fail(t),i},getTemplate:function(e){return v.ajax({type:"GET",url:e})},getCustomerApps:function(e,a,t){var n=x.api+"dealers/"+e.userId+"/apps",i=v.ajax({type:"POST",url:n,xhrFields:{withCredentials:!0},data:g,success:null,timeout:3e4});return a&&i.done(a),t&&i.fail(t),i},getAllCustomerApps:function(e,a){var t=x.api+"dealers/apps",n=v.ajax({type:"POST",url:t,xhrFields:{withCredentials:!0},data:g,success:null,timeout:6e4});return e&&n.done(e),a&&n.fail(a),n},getAllBusinessApps:function(e,a){var t=x.api+"dealers/apps/businesses",n=v.ajax({type:"POST",url:t,xhrFields:{withCredentials:!0},data:g,success:null,timeout:6e4});return e&&n.done(e),a&&n.fail(a),n},getAllBusinessAppsForCustomer:function(e,a,t){var n=x.api+"dealers/apps/businesses/"+e,i=v.ajax({type:"POST",url:n,xhrFields:{withCredentials:!0},data:g,success:null,timeout:6e4});return a&&i.done(a),t&&i.fail(t),i},getBusinessApps:function(e,a,t){var n=x.api+"dealers/apps/"+e,i=v.ajax({type:"POST",url:n,xhrFields:{withCredentials:!0},data:g,success:null,timeout:6e4});return a&&i.done(a),t&&i.fail(t),i},getBusinessAppsForCustomer:function(e,a,t){var n=x.api+"dealers/apps/"+e.businessNicename+"/"+e.userId,i=v.ajax({type:"POST",url:n,xhrFields:{withCredentials:!0},data:g,success:null,timeout:6e4});return a&&i.done(a),t&&i.fail(t),i},getHomeValue:function(e,a,t,n){var i=x.api+"mortgage/homeValue",r=v.extend({address:e,zip:a},g),s=v.ajax({type:"GET",url:i,xhrFields:{withCredentials:!0},data:r,success:null,timeout:5e3});return t&&s.done(t),n&&s.fail(n),s},validatePhoneEmail:function(e,a,t,n,i,r){var s=x.api+"validate/phone_email",u=v.extend({firstName:e,lastName:a,phoneNumber:t,email:n},g),l=v.ajax({type:"POST",url:s,xhrFields:{withCredentials:!0},data:u,success:null,timeout:1e4});return i&&l.done(i),r&&l.fail(r),l},getCategoryDetails:function(e,a,t){var n=x.api+"category/"+e,i=v.ajax({type:"GET",url:n,data:g,xhrFields:{withCredentials:!0},success:null,timeout:8e3});return a&&i.done(a),t&&i.fail(t),i},getAvgApr:function(e,a,t,n,i,r,s){var u,l,o=x.api+"category/"+e+"/apr/avg",c=(i=Boolean(i)?i:0,a?a*(1-.125*i):null),d=a?a*(1+.125*i):null,f=n?n-6*i:null,p=n?n+6*i:null;switch(!0){case 720<t:l=850,u=720;break;case 690<t:l=720,u=690;break;case 630<t:l=690,u=630;break;case 550<t:l=630,u=550;break;default:l=550,u=300}var m=v.extend({vertical:e,loanAmountMin:c,loanAmountMax:d,creditScoreMin:u,creditScoreMax:l,loanTermMin:f,loanTermMax:p},g),h=v.ajax({type:"POST",url:o,xhrFields:{withCredentials:!0},data:m,success:null,timeout:8e3});return r&&h.done(r),s&&h.fail(s),h},getOfferUrl:function(e,a,t){var n=v.extend({},g,e),i=v.ajax({type:"GET",url:x.api+"lead/getOfferUrl",data:n,xhrFields:{withCredentials:!0},success:null,timeout:3e4});return a&&i.done(a),t&&i.fail(t),i},startLead:m,getUserLeadMetrics:function(e,a,t){var n=v.extend({leadTrackingId:relatedLeadTrackingId},g),i=v.ajax({type:"GET",url:x.api+"lead/getUserLeadMetrics",data:n,xhrFields:{withCredentials:!0},success:null,timeout:3e4});return a&&i.done(a),t&&i.fail(t),i},sendNoOffersEmail:function(e,a,t){var n=x.api+"lead/sendNoOffersEmail/"+e,i=v.extend({smSessionId:y,leadTrackingId:d},g),r=v.ajax({type:"POST",url:n,xhrFields:{withCredentials:!0},data:i,success:null,timeout:8e3});return a&&r.done(a),t&&r.fail(t),r},initialized:function(){return r},admin:{uploadConversionFile:function(e,a,t){v.ajax({type:"POST",url:x.api+"admin/invoicing/conversions/process",xhrFields:{withCredentials:!0},data:e,cache:!1,contentType:!1,processData:!1}).done(function(e){e.success?a(e):t(e.message)}).fail(function(e){t(e)})}},setApiKey:function(e){g.apiKey=e},setLeadTracking:function(e){d=e},verifyPhone:function(e){return v.ajax({url:x.app+"briteverify.php",type:"POST",data:"contacttype=phone&bv_phone="+e})},getFunnelMaxMatches:function(e){return v.ajax({url:x.api+"category/"+e+"/aff_id/maxMatches",type:"GET",xhrFields:{withCredentials:!0}})}})}(jQuery),"undefined"==typeof smExtInit&&jQuery(document).ready(function(e){e(document).on("sm_api:initialized",function(){e.supermoney.initCtaLinks()}),e.supermoney.init()});