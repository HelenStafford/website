(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["searchbox"],{"18ee":function(e,t,s){"use strict";var i=s("49b1"),r=s.n(i);r.a},"1f29":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sm-search-wrapper",class:{"show-form":e.showSearchBox},on:{keyup:function(t){return t.preventDefault(),e.keyboardHandler(t)},keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault()}}},[s("div",{staticClass:"search-icon show-mobile",attrs:{"aria-label":"open search",role:"button"},on:{click:function(t){return e.toggleForm()}}},[s("i",{staticClass:"fa fa-search"})]),s("div",{staticClass:"sm-search-form hide-mobile"},[s("i",{staticClass:"fa fa-search search-input-icon"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerms,expression:"searchTerms"}],ref:"search",staticClass:"search-input",attrs:{placeholder:"What are you looking for?","aria-label":"Search"},domProps:{value:e.searchTerms},on:{focus:function(t){e.active=!0},input:function(t){t.target.composing||(e.searchTerms=t.target.value)}}}),e.working&&e.active&&!e.error?s("div",{staticClass:"search-working"},[s("bouncing-ball-loader")],1):e._e(),s("span",{staticClass:"search-input-close show-mobile",on:{click:function(t){return e.toggleForm()}}},[e._v("âœ•")])]),s("div",{staticClass:"search-results-wrapper"},[e.results.length>0&&e.active&&!e.error?s("div",{staticClass:"search-results",attrs:{id:"search-results"}},e._l(e.documentTypes,(function(t,i){return t.results.length>0?s("search-results-section",{key:t.title,staticClass:"result-category",attrs:{title:t.title,results:t.results,searchTerms:e.searchTerms,active:e.selectedSection==i,selectedItem:e.selectedSectionItem}}):e._e()})),1):e._e(),0!=e.results.length||!e.active||e.noResults||e.error?e._e():s("div",{staticClass:"search-results"},[s("search-results-section",{attrs:{title:"Common Searches",results:e.suggestions,active:"common"==e.selectedSection,selectedItem:e.selectedSectionItem}})],1),0==e.results.length&&e.active&&e.noResults&&!e.error?s("div",{staticClass:"search-results search-no-results"},[s("search-result",{attrs:{pageTitle:"No results found"}})],1):e._e(),e.active&&e.error?s("div",{staticClass:"search-results search-error"},[s("search-result",{attrs:{pageTitle:"Search error"}})],1):e._e()])])},r=[],n=s("0086"),o=s.n(n),c=s("cebe"),a=s.n(c);a.a.defaults.withCredentials=!0;const l=o.a.searchApi?o.a.searchApi:o.a.httpProt+o.a.apiDomain+":"+o.a.apiPort;o.a.httpProt,o.a.wwwDomain;let u;class h{static async search(e){u&&u.cancel();const t=a.a.CancelToken,s=t.source();u=s;try{const t=await a()({method:"get",url:l+"/search",params:{q:e},cancelToken:s.token});return u=null,t.data.success&&t.data.data?t.data.data:[]}catch(i){if(i.isAxiosError)throw i;return!1}}}var d=h,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"results-section"},[s("div",{staticClass:"results-section-title"},[e._v(e._s(e.title))]),e._l(e.results,(function(t,i){return s("search-result",{key:t.path,attrs:{pageTitle:t.title,icon:t.icon,link:t.path,searchTerms:e.searchTerms,selected:e.active&&e.selectedItem==i}})}))],2)},p=[],g={name:"SearchResultsSection",components:{SearchResult:()=>Promise.resolve().then(s.bind(null,"78db"))},props:["title","results","searchTerms","active","selectedItem"],data(){return{}}},f=g,y=(s("9c98"),s("2877")),v=Object(y["a"])(f,m,p,!1,null,"473cd3be",null),w=v.exports,T=s("78db"),b=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bb-loader"},[s("div"),s("div"),s("div"),s("div")])}],C={name:"BouncingBallLoader"},S=C,R=(s("18ee"),Object(y["a"])(S,b,k,!1,null,null,null)),x=R.exports,I={name:"SearchBox",components:{SearchResultsSection:w,SearchResult:T["default"],BouncingBallLoader:x},data(){return{showSearchBox:!1,searchTerms:null,active:!1,noResults:!1,error:!1,working:!1,debounceDelay:500,debounceTimeout:null,gtmTimeout:null,searchRequest:null,selectedItem:!1,selectedSection:!1,selectedSectionItem:!1,selectedItemLink:!1,topResultCutoff:120,documentTypes:{top:{results:[],newResults:[]},funnel:{title:"Request Free Quotes",icon:"/includes/img/search/quote-funnels.svg",results:[],newResults:[]},"offer-engine":{title:"Apply & Prequalify",icon:"/includes/img/search/apply-prequalify.svg",results:[],newResults:[]},best:{title:"Our Best Picks",icon:"/includes/img/search/best-picks.svg",results:[],newResults:[]},product:{title:"Products",results:[],newResults:[]},company:{title:"Companies",results:[],newResults:[]},category:{title:"Comparisons",icon:"/includes/img/search/comparison-pages.svg",results:[],newResults:[]},"expert-guide":{title:"Expert Guides",icon:"/includes/img/search/expert-guides.svg",results:[],newResults:[]},"industry-study":{title:"Industry Studies",icon:"/includes/img/search/industry-studies.svg",results:[],newResults:[]},post:{title:"Relevant Articles",icon:"/includes/img/search/relevant-articles.svg",results:[],newResults:[]},local:{title:"Localized Results",icon:"/includes/img/search/localized-results.svg",results:[],newResults:[]},topic:{title:"Topics",icon:"/includes/img/search/topics.svg",results:[],newResults:[]},page:{title:"Other",icon:"/includes/img/common/logo-sm-blue.svg",results:[],newResults:[]}},results:[],suggestions:[]}},created(){this.suggestions=[{type:"best",path:"/best/personal-loans/",title:'Best Personal Loans<span class="suffix">'+this.documentTypes["best"].title+"</span>",icon:this.documentTypes["best"].icon},{type:"category",path:"/reviews/mortgage-refinance",title:'Mortgage Refinance<span class="suffix">'+this.documentTypes["category"].title+"</span>",icon:this.documentTypes["category"].icon},{type:"expert-guide",path:"/buy-a-house",title:'How to Buy a House<span class="suffix">'+this.documentTypes["expert-guide"].title+"</span>",icon:this.documentTypes["expert-guide"].icon},{type:"product",path:"/reviews/personal-credit-cards/chase-sapphire-preferred-card",title:'Chase Sapphire Preferred<span class="suffix">'+this.documentTypes["product"].title+"</span>",icon:"https://s3-us-west-2.amazonaws.com/supermoney-reviews/businesses/1/chase-sapphire-preferred-card_toe.png"},{type:"post",path:"/how-to-compare-money-transfer-services/",title:'Compare Money Transfer Services<span class="suffix">'+this.documentTypes["post"].title+"</span>",icon:this.documentTypes["post"].icon}],window.eventBus.$on("navMenu",e=>{e&&this.closeSearch()}),window.eventBus.$on("dimPageClick",this.closeSearch);const e=this,t=function(){e.debounceDelay=1e3,window.removeEventListener("touchstart",t)};window.addEventListener("touchstart",t)},watch:{searchTerms(e){if(this.error=!1,this.gtmTimeout&&clearTimeout(this.gtmTimeout),this.debounceTimeout&&clearTimeout(this.debounceTimeout),e.length>2){const t=this;this.working=!0,this.debounceTimeout=setTimeout(async()=>{try{const s=await d.search(e);!1!==s&&(this.working=!1,t.results=s,t.noResults=!s.length,this.gtmEvent(e))}catch(s){t.error=!0,this.working=!1}},this.debounceDelay)}else e.length<=2&&(this.results=[],this.noResults=!1,this.working=!1)},results(e){if(this.resetItemSelection(),Array.isArray(e)&&e.length){let t=[...e],s=0,i=0;t.length>10&&(t.sort((function(e,t){return t.score-e.score})),t[0].score>this.topResultCutoff&&(i=Math.min(Math.floor(t.length/3),5)));for(let e in t){const r=t[e];!r.icon&&this.documentTypes[r.type].icon&&(r.icon=this.documentTypes[r.type].icon),s<i&&("product"==r.type&&(r.score>=150||r.score>=120&&r.rank_score>60)||"company"==r.type&&r.score>=150||"product"!=r.type&&"company"!=r.type&&r.score>this.topResultCutoff)?(r.title+='<span class="suffix">'+this.documentTypes[r.type].title+"</span>",this.documentTypes["top"].newResults.push(r),s++):this.documentTypes[r.type]&&this.documentTypes[r.type].newResults.length<5&&this.documentTypes[r.type].newResults.push(r)}}for(let t in this.documentTypes)"product"==t&&this.documentTypes[t].newResults.sort((function(e,t){return e.oob!=t.oob?e.oob?-1:1:e.showlisting!=t.showlisting?e.showlisting?1:-1:e.featured!=t.featured?e.featured?1:-1:e.monetized!=t.monetized?e.monetized?1:-1:t.rank_score-e.rank_score})),this.documentTypes[t].results=this.documentTypes[t].newResults,this.documentTypes[t].newResults=[]},active(e){e?(globalToggleNav(!1),document.body.classList.add("dropdown-dim-search"),document.getElementsByTagName("body")[0].style.overflow="hidden",document.getElementsByTagName("body")[0].style.height="100%"):(document.body.classList.remove("dropdown-dim-search"),document.getElementsByTagName("body")[0].style.overflow="auto",document.getElementsByTagName("body")[0].style.height="auto")}},methods:{toggleForm(){this.showSearchBox=!this.showSearchBox,this.active=this.showSearchBox,this.showSearchBox&&this.$nextTick((function(){this.$refs.search.focus()}))},focusItem(e){if(!1===this.selectedItem){if(e<0)return;this.selectedItem=0}else this.selectedItem+=e;if(this.selectedItem<0)return void this.resetItemSelection();let t=this.selectedItem;if(this.results.length>0)for(let s in this.documentTypes){let i=this.documentTypes[s];if(i.results.length){if(!(t+1>i.results.length))return this.selectedSection=s,this.selectedSectionItem=t,this.selectedItemLink=i.results[t].path,void this.$nextTick((function(){let t=document.getElementById("search-results"),s=document.getElementsByClassName("search-result item-selected");s.length&&(s=s[0],e>0&&s.offsetTop>t.clientHeight+t.offsetTop?t.scrollTop=s.offsetTop-t.clientHeight+80:e<0&&s.offsetTop<t.scrollTop&&(t.scrollTop=s.offsetTop<60?0:s.offsetTop-60))}));t-=i.results.length}}else if(t<this.suggestions.length)return this.selectedSection="common",this.selectedSectionItem=t,void(this.selectedItemLink=this.suggestions[t].path);this.selectedItem--},resetItemSelection(){this.selectedItem=!1,this.selectedSection=!1,this.selectedSectionItem=!1,this.selectedItemLink=!1},clickItem(){this.selectedItemLink&&(window.location.href=this.selectedItemLink)},gtmEvent(e){this.gtmTimeout&&clearTimeout(this.gtmTimeout),this.gtmTimeout=setTimeout((function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"search",searchTerm:e})}),1500)},closeSearch(){this.active=!1,this.showSearchBox=!1,this.resetItemSelection()},keyboardHandler(e){switch(e.key){case"ArrowUp":!this.active&&this.results.length>0&&(this.active=!0),this.focusItem(-1);break;case"ArrowDown":!this.active&&this.results.length>0&&(this.active=!0),this.focusItem(1);break;case"Enter":this.active?this.clickItem():this.active=!0;break;case"Escape":this.closeSearch();break;default:const t=String.fromCharCode(e.keyCode);/[a-zA-Z0-9-_ ]/.test(t)&&(this.active=!0);break}}}},_=I,B=(s("f140"),Object(y["a"])(_,i,r,!1,null,"ae322dee",null));t["default"]=B.exports},"49b1":function(e,t,s){},5755:function(e,t,s){},"78db":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-result",class:{"item-selected":e.selected}},[e.link?s("a",{attrs:{href:e.link}},[e.icon?s("div",{staticClass:"icon-wrapper"},[s("img",{staticClass:"result-icon",attrs:{src:e.icon,alt:""}})]):e._e(),s("span",{staticClass:"result-text",attrs:{title:this.$options.filters.stripHtmlContent(e.pageTitle)},domProps:{innerHTML:e._s(this.$options.filters.highlightAll(e.pageTitle,e.searchTerms))}})]):e._e(),e.link?e._e():s("span",[e.icon?s("div",{staticClass:"icon-wrapper"},[s("img",{staticClass:"result-icon",attrs:{src:e.icon,alt:""}})]):e._e(),s("span",{staticClass:"result-text",attrs:{title:this.$options.filters.stripHtmlContent(e.pageTitle)},domProps:{innerHTML:e._s(this.$options.filters.highlightAll(e.pageTitle,e.searchTerms))}})])])},r=[];function n(e,t){if(!t)return e;var s=new RegExp(("\\b"+t.trim()+".*?\\b").replace(/  +/g," ").replace(/ /g,".*?\\b|\\b"),"ig");return e.toString().replace(s,(function(e,t,s){return"<strong>"+e+"</strong>"}))}function o(e){var t=document.createElement("div");t.innerHTML=e;for(let i of t.children)t.removeChild(i);var s=t.textContent||t.innerText||"";return s}var c={name:"SearchResult",props:["pageTitle","icon","link","searchTerms","selected"],data(){return{}},filters:{highlightAll:n,stripHtmlContent:o}},a=c,l=(s("dfeb"),s("2877")),u=Object(l["a"])(a,i,r,!1,null,"03c9c66d",null);t["default"]=u.exports},"87a3":function(e,t,s){},"9c98":function(e,t,s){"use strict";var i=s("5755"),r=s.n(i);r.a},df0a:function(e,t,s){},dfeb:function(e,t,s){"use strict";var i=s("df0a"),r=s.n(i);r.a},f140:function(e,t,s){"use strict";var i=s("87a3"),r=s.n(i);r.a}}]);
//# sourceMappingURL=searchbox.3df3b9cb.js.map