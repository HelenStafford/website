		//prevent session timeouts while onsite
		users_keep_alive();
		function users_keep_alive() {
	    setTimeout(function(){
				jQuery.ajax({
					type:"GET",
					url:'./inc/ajax_functions.php?action=user_keep_alive',
					complete: function() {
						users_keep_alive();
					}
				});
	    }, 1000*60*15);
		}


		jQuery(document).ready(function(){
			//update body background for mobile
			if (isVisible(document.getElementById('is_mobile_only'))) {
				if (typeof jQuery('#background_mobile').val() !== 'undefined') {
					jQuery('body').css('background-image', 'url('+jQuery('#background_mobile').val()+')');
				}
			}

			jQuery('body').on('click', '.signup_button', function(){
                        jQuery('#overlay_div').show();
                        jQuery('#signup_modal').fadeIn(400);
                        jQuery('#signup_modal').centerToWindow();
			});

			jQuery('body').on('click', '#overlay_div', function(){
				jQuery('.overlay_modal').fadeOut(400);
				jQuery(this).hide();
			});
			
//			jQuery('body').on('click', '#email_form_submit', function(e){
//				var fid = jQuery(this).data('form_id');
//				var pre = 0;
//				if (!check_email('inf_field_Email')) pre = 1;
//
//				if (pre) {
//					e.preventDefault();
//					e.returnValue = '';
//				}
//			});
//
//			jQuery('body').on('keyup blur', '.mail_form_field', function(e){
//				var eid = jQuery(this).attr('id');
//
//			});
//
//			jQuery('body').on('blur', '.validate_email_field', function(){
//				var field_value = jQuery(this).val();
//				jQuery('.valid_email_msg').remove();
//				if (!isEmailValid(field_value)) {
//		      var message = "<span class='valid_email_msg alert alert-xs alert-danger'>Invalid Email <i class='glyphicon glyphicon-exclamation-sign text-danger'></i></span>";
//					jQuery('.form_submit_button').addClass('disabled');
//				} else {
//					jQuery('.form_submit_button').removeClass('disabled');
//				}
//			});
		});

		function check_name(eid) {
			if (jQuery('#'+eid).length > 0){
				if (jQuery('#'+eid).val().length < 3) {
					jQuery('#'+eid).addClass('email_danger');
					jQuery('#'+eid).removeClass('email_success');
					return 0;
				} else {
					jQuery('#'+eid).removeClass('email_danger');
					jQuery('#'+eid).addClass('email_success');
					return 1;
				}
			}
			return 0;
		}


		function check_email(eid) {
			if (!isEmailValid(jQuery('#'+eid).val())) {
				jQuery('#'+eid).addClass('email_danger');
				jQuery('#'+eid).removeClass('email_success');
				return 0;
			} else {
				jQuery('#'+eid).removeClass('email_danger');
				jQuery('#'+eid).addClass('email_success');
				return 1;
			}
		}

		function check_phone(eid) {
			if (!isPhoneValid(jQuery('#'+eid).val())) {
				jQuery('#'+eid).addClass('email_danger');
				jQuery('#'+eid).removeClass('email_success');
				return 0;
			} else {
				jQuery('#'+eid).removeClass('email_danger');
				jQuery('#'+eid).addClass('email_success');
				return 1;
			}
		}

		function isEmailValid(email) {
		  var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
		  return regex.test(email);
		}

		function isFilecharValid(filechar) {
		  var regex = /^[a-zA-Z0-9_-]+$/;
		  return regex.test(filechar);
		}

		function isPhoneValid(phone) {
		  var regex = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;
		  return regex.test(phone);
		}

    function setCookie(cname, cvalue, exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires="+d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

		function isVisible (ele) {
	    var style = window.getComputedStyle(ele);
	    return  style.width !== "0" &&
	    style.height !== "0" &&
	    style.opacity !== "0" &&
	    style.display!=='none' &&
	    style.visibility!== 'hidden';
		}

	jQuery.fn.centerToWindow = function() {
		var centered = 0;
	  var obj           = jQuery(this);
	  var obj_width     = jQuery(this).outerWidth(true);
	  var obj_height    = jQuery(this).outerHeight(true);
	  var window_width  = window.innerWidth ? window.innerWidth : jQuery(window).width();
	  var window_height = window.innerHeight ? window.innerHeight : jQuery(window).height();
		if (typeof jQuery(this).attr('top-distance') !== 'undefined') {
			var vartop = jQuery(this).attr('top-distance');
		} else {
			var vartop = ((window_height / 2) - (obj_height / 2));
		}
		if (typeof jQuery(this).attr('bottom-distance') !== 'undefined') {
			var varbottom = jQuery(this).attr('bottom-distance')+'px';
		} else {
			var varbottom = '';
		}

		var left_pixels = ((window_width / 2) - (obj_width / 2));
		if (left_pixels > 15) {
			left_pixels -= 10;
		}

		if (typeof jQuery(this).attr('full_mobile') !== 'undefined') {
			if (isVisible(document.getElementById('is_mobile_only'))) {
				if (obj.hasClass('mw380')) obj.removeClass('mw380');
				if (obj.hasClass('mw540')) obj.removeClass('mw540');
			  obj.css({
			  	"border-radius" : 0,
			    "position" : "fixed",
					"z-index"  : "2000",
			    "top"      : 0,
			    "bottom"   : 0,
			    "left"     : 0,
			    "right"     : 0
			  });
				centered = 1;
			}
		}

		if (!centered) {
		  obj.css({
		    "position" : "fixed",
				"z-index"  : "2000",
		    "top"      : vartop+"px",
		    "bottom"   : varbottom+"px",
		    "left"     : left_pixels+"px"
		  });
		}
	}

		