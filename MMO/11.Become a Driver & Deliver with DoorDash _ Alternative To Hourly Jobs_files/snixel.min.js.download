// Open Pixel v1.1.0 | Published By Dockwa | Created By Stuart Yamartino | MIT License
!function(i,u,a){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return null!=e&&""!==e}function l(){return+new Date}var f={actionType:"",snixelToken:"",version:1,atsApplicantId:"",atsApplicationId:""},m=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))},p=function(){return"ontouchstart"in u},g=function(){return i.navigator.userAgent},d={prefix:function(){return"__snixel_"},set:function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:"/",a="";if(s(n)){var o=new Date;o.setTime(o.getTime()+60*n*1e3),a="; expires="+o.toGMTString()}u.cookie=this.prefix()+e+"="+t+a+"; path="+i+"; SameSite=Lax"},get:function(e){e=this.prefix()+e+"=";for(var t=u.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}},delete:function(e){this.set(e,"",-100)},exists:function(e){return s(this.get(e))},setUtms:function(){for(var e=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],t=!1,n=0,r=e.length;n<r;n++)if(s(h.getParameterByName(e[n]))){t=!0;break}if(t){var i,a={};for(n=0,r=e.length;n<r;n++)i=h.getParameterByName(e[n]),s(i)&&(a[e[n]]=i);this.set("utm",JSON.stringify(a))}},getUtm:function(e){if(this.exists("utm")){var t=JSON.parse(this.get("utm"));return e in t?t[e]:""}}},h={getParameterByName:function(e,t){t=t||i.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},externalHost:function(e){return e.hostname!=location.hostname&&0===e.protocol.indexOf("http")},addUrlParam:function(e,t,n){var r=t+"="+n,i="?"+r;return e&&(i=e.replace(new RegExp("([?&])"+t+"[^&]*"),"$1"+r))===e&&(i.includes("?")?i+="&"+r:i+="?"+r),i}},v=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.params=[],this.event=e,this.timestamp=t,this.optional=function e(t){return!1===s(t)?"":"object"===c(t)?e(JSON.stringify(t)):"function"==typeof t?e(t()):String(t)}(n),this.buildParams(),this.send()}var e,t,n;return e=r,(t=[{key:"buildParams",value:function(){var e=this.getAttribute();for(var t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t](t))}},{key:"getAttribute",value:function(){var e=this;return{actionType:function(){return f.actionType},snixelId:function(){return d.get("snixelId")},snixelToken:function(){return f.snixelToken},atsApplicantId:function(){return f.atsApplicantId},atsApplicationId:function(){return f.atsApplicationId},uid:function(){return d.get("uid")},ev:function(){return e.event},ed:function(){return e.optional},v:function(){return f.version},dl:function(){return i.location.href},rl:function(){return u.referrer},ts:function(){return e.timestamp},de:function(){return u.characterSet},sr:function(){return i.screen.width+"x"+i.screen.height},vp:function(){return i.innerWidth+"x"+i.innerHeight},cd:function(){return i.screen.colorDepth},dt:function(){return u.title},bn:function(){return m()},md:function(){return p()},ua:function(){return g()},tz:function(){return(new Date).getTimezoneOffset()},utm_source:function(e){return d.getUtm(e)},utm_medium:function(e){return d.getUtm(e)},utm_term:function(e){return d.getUtm(e)},utm_content:function(e){return d.getUtm(e)},utm_campaign:function(e){return d.getUtm(e)}}}},{key:"setParam",value:function(e,t){s(t)?this.params.push("".concat(e,"=").concat(encodeURIComponent(t))):this.params.push("".concat(e,"="))}},{key:"send",value:function(){i.navigator.sendBeacon?this.sendBeacon():this.sendImage()}},{key:"sendBeacon",value:function(){i.navigator.sendBeacon(this.getSourceUrl())}},{key:"sendImage",value:function(){this.img=u.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width="1",this.img.height="1",u.getElementsByTagName("body")[0].appendChild(this.img)}},{key:"getSourceUrl",value:function(){return"".concat("https://pixels.api.snagajob.com/pixels","?").concat(this.params.join("&"))}}])&&o(e.prototype,t),n&&o(e,n),r}();d.exists("uid")?d.set("uid",d.get("uid"),1051200):d.set("uid",f.version+"-xxxxxxxx-".replace(/[x]/g,function(e){var t=36*Math.random()|0;return("x"==e?t:3&t|8).toString(36)})+(+new Date).toString(36),1440),d.setUtms(),a.process=function(e,t,n){var r="snixelId";if("init"==e){f.snixelToken=t;var i="";s(h.getParameterByName(r))?i=h.getParameterByName(r):s(h.getParameterByName(r,u.referrer))?i=h.getParameterByName(r,u.referrer):d.exists(r)&&(i=d.get(r)),d.set(r,i,1440)}else"enableMultiDomain"==e?t?t.includes("#")||t.includes(".")?u.querySelectorAll(t).forEach(function(e){e.href=h.addUrlParam(e.href,r,d.get(r))}):(u.querySelectorAll("."+t).forEach(function(e){e.href=h.addUrlParam(e.href,r,d.get(r))}),u.querySelectorAll("#"+t).forEach(function(e){e.href=h.addUrlParam(e.href,r,d.get(r))})):u.querySelectorAll("a").forEach(function(e){e.href=h.addUrlParam(e.href,r,d.get(r))}):"event"==e?"pageload"!=t||f.pageLoadOnce?"pageload"!=t&&"pageclose"!=t&&(f.actionType=t,new v(t,l(),n)):(f.pageLoadOnce=!0,new v(t,a.t,n)):"setApplicantId"==e?f.atsApplicantId=t:"setApplicationId"==e&&(f.atsApplicationId=t)};for(var e=0,t=a.queue.length;e<t;e++)a.process.apply(a,a.queue[e]);i.addEventListener("unload",function(){f.pageCloseOnce||(f.pageCloseOnce=!0,new v("pageclose",l(),function(){if(s(f.externalHost)&&l()-f.externalHost.time<5e3)return f.externalHost.link}))}),i.onload=function(){for(var e=u.getElementsByTagName("a"),t=0,n=e.length;t<n;t++)e[t].addEventListener("click",function(e){h.externalHost(this)&&(f.externalHost={link:this.href,time:l()})}.bind(e[t]))}}(window,document,window.snixel);