/*  cmc.js v2.7
    Created by ClickMagick - https://ClickMagick.com - and released under the terms of the
    CC0 1.0 Universal legal code: http://creativecommons.org/publicdomain/zero/1.0/legalcode
*/

!function(){var k="undefined"!=typeof clickmagick_cmc;k&&(clickmagick_cmc.version=2.7);var o,c,m,e,_,i,t,a,n,l,r,g,u;function s(c,i,e,m){var t=new Date;t.setTime(t.getTime()+Math.floor(24*m*60*60*1e3)),document.cookie=c+"="+i+";domain="+e+";expires="+t.toUTCString()+";path=/"}function d(c){document.cookie=c+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}function p(c,i){var e;/^(click|goal)$/.test(i)||console.assert("type must be 'click' or 'goal'"),(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(m[i]="waiting",e.onload=function(){var c;/^\//.test(e.response)||"ABUSER"===(c=JSON.parse(e.response)).status&&(window.location.href=c.url),m[i]="success"},e.onerror=function(){m[i]="error"},e.open("GET",c,!0),e.send()):document.createElement("img").src=c}function f(){clickmagick_cmc.status="waiting",m={click:"success",goal:"success"}}function w(){var i=0;!function c(){setTimeout(function(){("waiting"==m.click||"waiting"==m.goal)&&i++<40?c():clickmagick_cmc.status="success"==m.click&&"success"==m.goal?"success":"error"},100)}()}function h(c){var i=new RegExp("&"+c+"=([^&]*)","i").exec(e);return i&&decodeURIComponent(i[1])||""}function v(c){return h(c)||clickmagick_cmc[c]||""}function b(){var c=["href","src","value","data-custom-js"];k&&void 0!==clickmagick_cmc.attrs&&(c=c.concat(clickmagick_cmc.attrs));for(var i=/(\[|\%5B)(cmc_vid|cmc_id|clickid|gclid|msclkid|utm_.+?)(\]|\%5D)/i,e=0;e<c.length;e++)for(var m=c[e],t=document.querySelectorAll("["+m+"]"),o=0;o<t.length;o++){for(var a,n=t[o].getAttribute(m),l=0;a=n.match(i);){var r=_,g=a[2].toLowerCase();if(/^utm/.test(g)?r=clickmagick_cmc[g]:"gclid"==g?r=clickmagick_cmc.gclid:"msclkid"==g&&(r=clickmagick_cmc.msclkid),n=n.replace(i,r),10<l++)break}n!=t[o].getAttribute(m)&&t[o].setAttribute(m,n)}}bots=new RegExp(["google-adwords","google web preview","google-structured-data","appengine-google","feedfetcher-google","adsbot-google","googlebot","facebookexternalhit","bingbot","msnbot","bingpreview","pinterestbot"].join("|"),"i"),bots.test(navigator.userAgent)||(o="https://www.clkmc.com/api/",c=function(){for(var c=0,i=document.domain,e=i.split("."),m="_gd"+(new Date).getTime();c<e.length-1&&-1==document.cookie.indexOf(m+"="+m);)i=e.slice(-1-++c).join("."),document.cookie=m+"="+m+";domain="+i+";";return document.cookie=m+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+i+";",i}(),m={},e=window.location.search.replace(/^\?/,"&"),(_=h("cmc_vid")||h("cmc_id")).match(/^cmc\d{10}$/i)&&(d("cmc_vid"),s("cmc_vid",_,"."+c,365)),_=function(c){for(var i=c+"=",e=decodeURIComponent(document.cookie).split(";"),m=0;m<e.length;m++){for(var t=e[m];" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(i))return t.substring(i.length,t.length)}return""}("cmc_vid"),/^\d{10}$/.test(_)&&(_="cmc"+_,d("cmc_vid"),s("cmc_vid",_,"."+c,365)),k&&(((u=h(g="cmc_ignore"))?!/^(no|false|0)$/i.test(u):clickmagick_cmc[g])||(clickmagick_cmc.utm_source=v("utm_source"),clickmagick_cmc.utm_medium=v("utm_medium"),clickmagick_cmc.utm_campaign=v("utm_campaign"),clickmagick_cmc.utm_term=v("utm_term"),clickmagick_cmc.utm_content=v("utm_content"),clickmagick_cmc.cmc_project=v("cmc_project"),clickmagick_cmc.cmc_goal=v("cmc_goal"),clickmagick_cmc.cmc_amt=v("cmc_amt"),clickmagick_cmc.cmc_cpc=v("cmc_cpc"),clickmagick_cmc.cmc_ref=v("cmc_ref"),clickmagick_cmc.cmc_unique=v("cmc_unique"),clickmagick_cmc.gclid=v("gclid"),clickmagick_cmc.msclkid=v("msclkid"),clickmagick_cmc.cmc_strip=v("cmc_strip"),"internal"==(i=clickmagick_cmc.utm_source.toLowerCase())?clickmagick_cmc.utm_source=i:"organic"==i&&(clickmagick_cmc.utm_source="",_||(clickmagick_cmc.utm_source=i,clickmagick_cmc.utm_medium=i,clickmagick_cmc.utm_campaign="none",document.referrer&&((t=document.createElement("a")).href=document.referrer,clickmagick_cmc.utm_campaign=t.hostname),clickmagick_cmc.cmc_goal="")),"a"==(a=h("cbur").toLowerCase())&&(clickmagick_cmc.cmc_goal="s"),"d"==a&&(clickmagick_cmc.cmc_goal=""),n=/^[aes]$/i.test(clickmagick_cmc.cmc_goal),l=""!=clickmagick_cmc.utm_source&&""!=clickmagick_cmc.utm_medium&&""!=clickmagick_cmc.utm_campaign,clickmagick_cmc.uid&&clickmagick_cmc.hid&&(l||n)&&(l&&""==clickmagick_cmc.cmc_project&&(clickmagick_cmc.cmc_project=c.replace(/^www\./i,"")),_||s("cmc_vid",_="cmc"+(Math.round(3294967294*Math.random())+1e9),"."+c,365),r="?vid="+_.replace(/^cmc/i,""),Object.keys(clickmagick_cmc).forEach(function(c){/^(cmc_strip|vid|id|attrs)$/.test(c)||""==clickmagick_cmc[c]||(r+="&"+c+"="+encodeURIComponent(clickmagick_cmc[c]))}),f(),!l||n&&"internal"!=clickmagick_cmc.utm_source||p(o+r.replace(/&cmc_goal=[^&]+/,""),"click"),n&&p(o+r.replace(/&utm_[^&]+/gi,""),"goal"),w())),clickmagick_cmc.log=function(c,i,e,m){if(c=c.toLowerCase(),i=i||"",e=e||"",m=m||"",/^\d+$/.test(clickmagick_cmc.uid)&&/^\d+$/.test(clickmagick_cmc.hid)){goalURL=o+"?vid="+_.replace(/^cmc/i,"")+"&uid="+clickmagick_cmc.uid+"&hid="+clickmagick_cmc.hid+"&cmc_goal="+c+"&cmc_ref="+encodeURIComponent(i),f(),"a"==c||"e"==c?p(goalURL+"&cmc_project="+encodeURIComponent(e),"goal"):"s"==c&&p(goalURL+"&cmc_amt="+encodeURIComponent(e)+"&cmc_project="+encodeURIComponent(m),"goal"),w();for(var t=Date.now()+200;Date.now()<t;);}},/cmc|utm/i.test(clickmagick_cmc.cmc_strip)&&history.replaceState&&(/utm/i.test(clickmagick_cmc.cmc_strip)&&(e=(e=(e=e.replace(/&utm_[^&]+/gi,"")).replace(/&gclid[^&]+/gi,"")).replace(/&msclkid[^&]+/gi,"")),(e=(e=e.replace(/&cmc_[^&]+/gi,"")).replace(/^&/,"?"))!=window.location.search&&history.pushState({},"",window.location.pathname+e+window.location.hash)),clickmagick_cmc.id=_,clickmagick_cmc.vid=_),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?b():document.addEventListener("DOMContentLoaded",b))}();
